<!DOCTYPE html>
<!-- saved from url=(0100)https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Monocular Visual Simultaneous Localization and Mapping
- MATLAB &amp; Simulink</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="canonical" href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html">
<link rel="stylesheet" href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/core.min.20230428200114579.css" type="text/css">
<link rel="stylesheet" href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/common.min.20230428200114579.css" type="text/css">
<link rel="stylesheet" href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/footer.min.20230428200114579.css" type="text/css">
<link href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/site6_offcanvas_v2.css" rel="stylesheet" type="text/css">
<!-- CRUX 2.0 -->
<link href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/site7_crux.css" rel="stylesheet" type="text/css">
<iframe src="javascript:void(0)" title="" role="presentation" style="width: 0px; height: 0px; border: 0px; display: none;" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/saved_resource.html"></iframe><script async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/qevents.js.download"></script><script type="text/javascript" async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/insight.min.js.download"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/quant.js.download" async="" type="text/javascript"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/186030155234771" async=""></script><script async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ahy.js.download"></script><script type="text/javascript" async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ahy.js.download"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/6735f9594d6bb8a4f1fe56c6b3e21cf5.js.download" type="text/javascript" async=""></script><script async="" type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/cmp2.js.download"></script><script type="text/javascript" async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/td.min.js.download"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/4750.js.download" async="" type="text/javascript"></script><script type="text/javascript" async="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/elqCfg.min.js.download"></script><script async="" type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/choice.js.download"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/jquery-3.6.0.min.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/jquery-migrate.min.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/bootstrap.min.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/global.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/webvitals.min.20230428200114579.js.download"></script>
<!-- BEGIN Adobe DTM -->
<script>(function(g,b,d,f){(function(a,c,d){if(a){var e=b.createElement("style");e.id=c;e.innerHTML=d;a.appendChild(e)}})(b.getElementsByTagName("head")[0],"at-body-style",d);setTimeout(function(){var a=b.getElementsByTagName("head")[0];if(a){var c=b.getElementById("at-body-style");c&&a.removeChild(c)}},f)})(window,document,"[class*='personalization-container']:not([id^='web-application']) {opacity: 0 !important}",2E3);</script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/satelliteLib-e8d23c2e444abadc572df06537e2def59c01db09.js.download" async=""></script>
<!-- END Adobe DTM -->
<link href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/doc_center.css" rel="stylesheet" type="text/css">
<link href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/matlab_dialog.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/livecontrolpopoverhandler.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/livetaskpopoverhandler.js.download"></script>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/openwith.js.download"></script>
<style>
.examples_short_list a.btn {display: none;}
</style>
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/openInBrowser.js.download"></script>
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-italic-400.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-italic-500.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-italic-700.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-normal-400.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-normal-500.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/roboto/roboto-latin-normal-700.20230428200114579.woff2" rel="preload" as="font" type="font/woff2" crossorigin="">
<link href="https://www.mathworks.com/etc.clientlibs/mathworks/clientlibs/customer-ui/templates/common/resources/fonts/mathworks.20230428200114579.woff" rel="preload" as="font" type="font/woff" crossorigin="">
<script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "BreadcrumbList",
"itemListElement":
[{
"@type": "ListItem",
"position": 1,
"item": {
"@id": "../index.html",
"name": "Computer Vision Toolbox"
}
}
,
{
"@type": "ListItem",
"position": 2,
"item": {
"@id": "../getting-started-with-computer-vision-system-toolbox.html",
"name": "Get Started with Computer Vision Toolbox"
}
}]
}</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "BreadcrumbList",
"itemListElement":
[{
"@type": "ListItem",
"position": 1,
"item": {
"@id": "../index.html",
"name": "Computer Vision Toolbox"
}
}
,
{
"@type": "ListItem",
"position": 2,
"item": {
"@id": "../structure-from-motion-and-visual-slam.html",
"name": "Structure from Motion and Visual SLAM"
}
}
,
{
"@type": "ListItem",
"position": 3,
"item": {
"@id": "../visual-simultaneous-localization-and-mapping-slam.html",
"name": "vSLAM"
}
}]
}</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "ItemList",
"name": "VisibleBreadcrumbs",
"itemListElement":
[
"getting-started-with-computer-vision-system-toolbox",
"visual-simultaneous-localization-and-mapping-slam"
],
"itemListOrder": "http://schema.org/ItemListOrderAscending"
}
</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "DigitalDocument",
"headline": "Monocular Visual Simultaneous Localization and Mapping",
"description": "Visual simultaneous localization and mapping (vSLAM).",
"thumbnailURL": "../../examples/vision/win64/MonocularVisualSimultaneousLocalizationAndMappingExample_07.png",
"genre": "Live Script",
"isBasedOn": {
"@type": "Product",
"name": "MATLAB"
},
"identifier": "vision.MonocularVisualSimultaneousLocalizationAndMappingExample",
"name": "MonocularVisualSimultaneousLocalizationAndMappingExample",
"url": "monocular-visual-simultaneous-localization-and-mapping.html"
}</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "PropertyValue",
"name": "open_command",
"value": "matlab:openExample('vision/MonocularVisualSimultaneousLocalizationAndMappingExample')"
}</script><script xmlns="http://www.w3.org/1999/xhtml" type="application/ld+json">
{
"@context": "http://schema.org",
"@type": "ItemList",
"name": "ExampleSourceFiles",
"itemListElement":
[
"MonocularVisualSimultaneousLocalizationAndMappingExample.mlx",
"helperAddNewKeyFrame.m",
"helperCheckLoopClosure.m",
"helperCreateNewMapPoints.m",
"helperTrackLastKeyFrame.m",
"helperTrackLocalMap.m",
"helperVisualizeMatchedFeatures.m",
"helperVisualizeMotionAndStructure.m",
"orbslamGroundTruth.mat",
"helperAddLoopConnections.m",
"helperORBFeatureExtractorFunction.m",
"bagOfFeaturesDataSLAM.mat",
"helperImportGroundTruth.m",
"helperMonoVisualSLAM.m",
"helperVisualizeMonoVisualSlam.m",
"helperVisualSLAMCodegen.m",
"bagOfFeaturesDataSLAMCg.mat",
"helperTrackLastKeyFrameCg.m",
"helperTrackLocalMapCg.m"
],
"itemListOrder": "http://schema.org/ItemListOrderAscending"
}
</script>
<meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Script-Type" content="text/javascript">
<meta xmlns="http://www.w3.org/1999/xhtml" name="toctype" itemprop="pagetype" content="ug">
<meta xmlns="http://www.w3.org/1999/xhtml" name="infotype" itemprop="infotype" content="other">
<meta xmlns="http://www.w3.org/1999/xhtml" name="description" itemprop="description" content="Visual simultaneous localization and mapping (vSLAM)."><meta xmlns="http://www.w3.org/1999/xhtml" content="../../examples/vision/win64/MonocularVisualSimultaneousLocalizationAndMappingExample_07.png" itemprop="thumbnailUrl">
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/l10n.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/docscripts.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/f1help.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/mw.toc_2.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/mw.imagescaling.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/mw.imageanimation.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/mw.breadcrumb.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/jquery.highlight.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/underscore-min.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/doc_omniture.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/overload.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/helpservices.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/productfilter.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/product_group.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/SaxonJS2.rt.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml">
window.history.replaceState(window.location.href, null, ""); // Initialize
document.addEventListener('DOMContentLoaded', function() {
mystylesheetLocation = "/help/releases/R2024a/includes/shared/scripts/product_group-sef.json";
mysourceLocation = "/help/releases/R2024a/docset.xml";
product_help_location = "vision";
pagetype = "section";
doccentertype = "web";
langcode = "";
getProductFilteredList(mystylesheetLocation, mysourceLocation, product_help_location, pagetype, doccentertype, langcode);
});
</script>
<!-- Additions/overrides from the doc side -->
<style>
.typeahead_container.typeahead_type_grouped { margin-left:0; }
@media (min-width:768px) {
#suggestions { margin-left:-100px }
}
</style>
<script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/helpcenter_docsearch.js.download"></script>
<script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/jquery.toggleval.js.download"></script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MathRenderer.js.download"></script><style type="text/css">math { visibility: hidden; }</style><link type="text/css" rel="stylesheet" href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/index-css.css"><script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/bundle.index.js.download"></script>
<script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/jquery.cookie.js.download"></script>
<script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/akamai-country-code.js.download"></script>
<script type="text/javascript">
var domainCountryCodeMap = new Map();
var countryCodeToDomainMap = new Map();
domainCountryCodeMap.set('www.mathworks.com', 'www');
countryCodeToDomainMap.set('www','www.mathworks.com')
domainCountryCodeMap.set('www.mathworks.com', 'www');
countryCodeToDomainMap.set('www','www.mathworks.com')
domainCountryCodeMap.set('la.mathworks.com', 'la');
countryCodeToDomainMap.set('la','la.mathworks.com')
domainCountryCodeMap.set('au.mathworks.com', 'au');
countryCodeToDomainMap.set('au','au.mathworks.com')
domainCountryCodeMap.set('de.mathworks.com', 'de');
countryCodeToDomainMap.set('de','de.mathworks.com')
domainCountryCodeMap.set('nl.mathworks.com', 'nl');
countryCodeToDomainMap.set('nl','nl.mathworks.com')
domainCountryCodeMap.set('ww2.mathworks.cn', 'ww2');
countryCodeToDomainMap.set('ww2','ww2.mathworks.cn')
domainCountryCodeMap.set('se.mathworks.com', 'se');
countryCodeToDomainMap.set('se','se.mathworks.com')
domainCountryCodeMap.set('se.mathworks.com', 'se');
countryCodeToDomainMap.set('se','se.mathworks.com')
domainCountryCodeMap.set('fr.mathworks.com', 'fr');
countryCodeToDomainMap.set('fr','fr.mathworks.com')
domainCountryCodeMap.set('de.mathworks.com', 'de');
countryCodeToDomainMap.set('de','de.mathworks.com')
domainCountryCodeMap.set('in.mathworks.com', 'in');
countryCodeToDomainMap.set('in','in.mathworks.com')
domainCountryCodeMap.set('uk.mathworks.com', 'uk');
countryCodeToDomainMap.set('uk','uk.mathworks.com')
domainCountryCodeMap.set('it.mathworks.com', 'it');
countryCodeToDomainMap.set('it','it.mathworks.com')
domainCountryCodeMap.set('jp.mathworks.com', 'jp');
countryCodeToDomainMap.set('jp','jp.mathworks.com')
domainCountryCodeMap.set('kr.mathworks.com', 'kr');
countryCodeToDomainMap.set('kr','kr.mathworks.com')
domainCountryCodeMap.set('nl.mathworks.com', 'nl');
countryCodeToDomainMap.set('nl','nl.mathworks.com')
domainCountryCodeMap.set('nl.mathworks.com', 'nl');
countryCodeToDomainMap.set('nl','nl.mathworks.com')
domainCountryCodeMap.set('au.mathworks.com', 'au');
countryCodeToDomainMap.set('au','au.mathworks.com')
domainCountryCodeMap.set('se.mathworks.com', 'se');
countryCodeToDomainMap.set('se','se.mathworks.com')
domainCountryCodeMap.set('www.mathworks.com', 'www');
countryCodeToDomainMap.set('www','www.mathworks.com')
domainCountryCodeMap.set('es.mathworks.com', 'es');
countryCodeToDomainMap.set('es','es.mathworks.com')
domainCountryCodeMap.set('se.mathworks.com', 'se');
countryCodeToDomainMap.set('se','se.mathworks.com')
domainCountryCodeMap.set('ch.mathworks.com', 'ch');
countryCodeToDomainMap.set('ch','ch.mathworks.com')
domainCountryCodeMap.set('uk.mathworks.com', 'uk');
countryCodeToDomainMap.set('uk','uk.mathworks.com')
var countrySubdomains = {
US: {name: 'United States', subdomain: 'www'},
AD: {name: 'Andorra', subdomain: 'es'},
AR: {name: 'Argentina', subdomain: 'la'},
AU: {name: 'Australia', subdomain: 'au'},
AT: {name: 'Austria', subdomain: 'de'},
BE: {name: 'Belgium', subdomain: 'nl'},
BO: {name: 'Bolivia', subdomain: 'la'},
BV: {name: 'Bouvet Islands', subdomain: 'se'},
CA: {name: 'Canada', subdomain: 'www'},
CL: {name: 'Chile', subdomain: 'la'},
CN: {name: 'China', subdomain: 'cn'},
CX: {name: 'Christmas Island', subdomain: 'au'},
CC: {name: 'Cocos-Keeling Islands', subdomain: 'au'},
CO: {name: 'Colombia', subdomain: 'la'},
CR: {name: 'Costa Rica', subdomain: 'la'},
DK: {name: 'Denmark', subdomain: 'se'},
DO: {name: 'Dominican Republic', subdomain: 'la'},
EC: {name: 'Ecuador', subdomain: 'la'},
SV: {name: 'El Salvador', subdomain: 'la'},
EE: {name: 'Estonia', subdomain: 'se'},
FO: {name: 'Faroe Islands', subdomain: 'se'},
FJ: {name: 'Fiji', subdomain: 'au'},
FI: {name: 'Finland', subdomain: 'se'},
FR: {name: 'France', subdomain: 'fr'},
GF: {name: 'French Guiana', subdomain: 'fr'},
PF: {name: 'French Polynesia', subdomain: 'fr'},
DE: {name: 'Germany', subdomain: 'de'},
GL: {name: 'Greenland', subdomain: 'se'},
GP: {name: 'Guadalupe', subdomain: 'fr'},
GT: {name: 'Guatemala', subdomain: 'la'},
HN: {name: 'Honduras', subdomain: 'la'},
HK: {name: 'Hong Kong', subdomain: 'cn'},
IS: {name: 'Iceland', subdomain: 'se'},
IN: {name: 'India', subdomain: 'in'},
IE: {name: 'Ireland', subdomain: 'uk'},
IT: {name: 'Italy', subdomain: 'it'},
JP: {name: 'Japan', subdomain: 'jp'},
KR: {name: 'Korea', subdomain: 'kr'},
LV: {name: 'Latvia', subdomain: 'se'},
LI: {name: 'Liechtenstein', subdomain: 'ch'},
LT: {name: 'Lithuania', subdomain: 'se'},
LU: {name: 'Luxembourg', subdomain: 'nl'},
MO: {name: 'Macau', subdomain: 'cn'},
MQ: {name: 'Martinique', subdomain: 'fr'},
YT: {name: 'Mayotte Island', subdomain: 'fr'},
MX: {name: 'Mexico', subdomain: 'la'},
MC: {name: 'Monaco', subdomain: 'fr'},
NL: {name: 'Netherlands', subdomain: 'nl'},
NC: {name: 'New Caledonia', subdomain: 'fr'},
NZ: {name: 'New Zealand', subdomain: 'au'},
NI: {name: 'Nicaragua', subdomain: 'la'},
NO: {name: 'Norway', subdomain: 'se'},
PA: {name: 'Panama', subdomain: 'la'},
PG: {name: 'Papua New Guinea', subdomain: 'au'},
PY: {name: 'Paraguay', subdomain: 'la'},
PE: {name: 'Peru', subdomain: 'la'},
PT: {name: 'Portugal', subdomain: 'www'},
PR: {name: 'Puerto Rico', subdomain: 'la'},
RE: {name: 'Reunion Island', subdomain: 'fr'},
ES: {name: 'Spain', subdomain: 'es'},
LK: {name: 'Sri Lanka', subdomain: 'in'},
SE: {name: 'Sweden', subdomain: 'se'},
CH: {name: 'Switzerland', subdomain: 'ch'},
GB: {name: 'United Kingdom', subdomain: 'uk'},
UY: {name: 'Uruguay', subdomain: 'la'},
VA: {name: 'Vatican City', subdomain: 'it'},
VE: {name: 'Venezuela', subdomain: 'la'},
};
var domainUtils = {
isExemptUrl: function (url) {
if(window.overrideDomainSelector){
return true;
}
var exemptions = [
'/api/parts/',
'nocookie=true',
'client=addons',
'requestedDomain'
];
return exemptions.some(function (exemption) {
return url.indexOf(exemption) != -1;
});
},
endsWith: function( str, suffix ) {
return str.substring( str.length - suffix.length, str.length ) === suffix;
},
getDomain: function (url) {
var segments = url.split('/');
return segments[2];
},
getSubdomain: function (domain) {
return domainCountryCodeMap.get(domain);
},
setCookies: function (domain, lang) {
var domainCookie = 'mathworks.com';
if (this.endsWith(location.host, 'mathworks.cn')) {
domainCookie = 'mathworks.cn';
}
var selectedSubdomain = this.getSubdomain(domain);
if (this.endsWith(domain, 'mathworks.cn')) {
selectedSubdomain = 'cn';
}
if (selectedSubdomain === 'www') {
// This is what ePS did in EQUUS and Ruby, so...
// we're just following suit.
selectedSubdomain = 'us';
}
if (selectedSubdomain !== 'cn' && selectedSubdomain !== 'ch') {
lang = '';
}
var cookieNames = this.getCookieNames(domain);
var expires = new Date();
expires.setFullYear(expires.getFullYear() + 68);
var myJSON = JSON.stringify({
domain: selectedSubdomain,
lang: lang,
v: 2
});
$.cookie(cookieNames.mwaPrefsCookieName, myJSON, {path: '/', expires: 20*365, domain: domainCookie});
},
getCookieNames: function (domain) {
var mwaLoginCookieName = 'mwa';
var mwaPrefsCookieName = 'mwa_prefs';
var subdomainSuffix = '';
if (subdomainSuffix != "") {
mwaLoginCookieName = mwaLoginCookieName + subdomainSuffix;
mwaPrefsCookieName = mwaPrefsCookieName + subdomainSuffix;
}
return {
mwaLoginCookieName: mwaLoginCookieName,
mwaPrefsCookieName: mwaPrefsCookieName,
};
},
switchDomain: function (targetDomain, targetLang) {
var targetUri = location.pathname;
targetLang = this.getValidLang(this.getSubdomain(targetDomain), targetLang);
var url = '//' + targetDomain;
url += targetUri + location.search;
url = url.replace(/requestedDomain=[a-z]?[a-z]?&?/, '');
url = url.replace(/\&$/, '');
url = url.replace(/\?$/, '');
var requestedDomainParam = 'requestedDomain=' + targetLang;
if (url.indexOf('?') > -1) {
url = url + '&' + requestedDomainParam;
} else {
url = url + '?' + requestedDomainParam;
}
window.location = url;
},
getPrefCookie: function(currentDomain) {
var cookieNames = this.getCookieNames(currentDomain);
// regex from: https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie
var cookieRegex = new RegExp("(?:(?:^|.*;\\s*)"+cookieNames.mwaPrefsCookieName+"\\s*\\=\\s*([^;]*).*$)|^.*$");
if (document.cookie) {
var cookieValue = document.cookie.replace(cookieRegex, "$1");
if (cookieValue) {
return JSON.parse(decodeURIComponent(cookieValue));
}
}
return "";
},
getPrefDomain: function (currentDomain) {
var mwaPrefsCookieJsonObject = this.getPrefCookie(currentDomain);
var visitorPrefDomain;
if (!!mwaPrefsCookieJsonObject) {
visitorPrefDomain = mwaPrefsCookieJsonObject.domain;
if (visitorPrefDomain === 'us') {
visitorPrefDomain = 'www';
}else if (visitorPrefDomain === 'cn') {
visitorPrefDomain = 'ww2';
}
}
return countryCodeToDomainMap.get(visitorPrefDomain);
},
getPrefLang: function (currentDomain) {
var mwaPrefsCookieJsonObject = this.getPrefCookie(currentDomain);
var multilingualDomainLanguageSupport = {};
multilingualDomainLanguageSupport['ch'] = ['en','de','fr'];
multilingualDomainLanguageSupport['cn'] = ['zh','en'];
var currentDomainLangOptions = multilingualDomainLanguageSupport[mwaPrefsCookieJsonObject.domain];
if (currentDomainLangOptions) {
var cookiePrefLang = mwaPrefsCookieJsonObject.lang;
if (currentDomainLangOptions.indexOf(cookiePrefLang) >= 0) {
return cookiePrefLang;
} else {
return currentDomainLangOptions[0];
}
}
return '';
},
getCookieVersion: function (currentDomain) {
var mwaPrefsCookieJsonObject = this.getPrefCookie(currentDomain);
return mwaPrefsCookieJsonObject.v;
},
getTargetDomainForCookies: function() {
var targetDomain = "";
if (this.endsWith(location.host, 'mathworks.cn')) {
targetDomain = window.location.protocol + "//" + countryCodeToDomainMap.get('www');
}else{
targetDomain = window.location.protocol + "//" + countryCodeToDomainMap.get('ww2');
}
return targetDomain;
},
getValidLang: function (subdomain, lang) {
var multilingualDomainLanguageSupport = {};
multilingualDomainLanguageSupport['ch'] = ['en','de','fr'];
multilingualDomainLanguageSupport['cn'] = ['zh','en'];
multilingualDomainLanguageSupport['ww2'] = ['zh','en'];
var currentDomainLangOptions = multilingualDomainLanguageSupport[subdomain];
if (currentDomainLangOptions) {
if (currentDomainLangOptions.indexOf(lang) >= 0) {
return lang;
} else {
return currentDomainLangOptions[0];
}
}
return '';
},
isDefaultLang: function (subdomain, lang) {
var multilingualDomainLanguageDefault = {};
multilingualDomainLanguageDefault['ch'] = 'en';
multilingualDomainLanguageDefault['cn'] = 'zh';
multilingualDomainLanguageDefault['ww2'] = 'zh';
var currentDomainLang = multilingualDomainLanguageDefault[subdomain];
if (currentDomainLang) {
if (currentDomainLang === lang) {
return true;
} else {
return false;
}
} else if (lang) {
return false;
}
return true;
}
};
$(window).on('load', function() {
var currentUrl = window.location.href;
var currentDomain = domainUtils.getDomain(currentUrl);
var currentSubdomain = domainUtils.getSubdomain(currentDomain);
var requestedDomainLangRegEx = RegExp('[?&]requestedDomain=([^&]*)').exec(window.location.search);
if (requestedDomainLangRegEx) {
var setLang = domainUtils.getValidLang(currentSubdomain, requestedDomainLangRegEx[1])
domainUtils.setCookies(currentDomain, setLang);
var URLWithoutRequestedDomain = window.location.href.replace(/requestedDomain=[a-z]?[a-z]?&?/, '');
URLWithoutRequestedDomain = URLWithoutRequestedDomain.replace(/\&$/, '');
URLWithoutRequestedDomain = URLWithoutRequestedDomain.replace(/\?$/, '');
history.replaceState({}, document.title, URLWithoutRequestedDomain);
window.location = URLWithoutRequestedDomain;
}
$('body').on('click', '.domain_selector_link', function (e) {
e.preventDefault();
var selectedDomain = domainUtils.getDomain(this.href);
var selectedLang = $(this).data('lang');
domainUtils.setCookies(selectedDomain, selectedLang);
domainUtils.switchDomain(selectedDomain, selectedLang);
});
var currentCountryText =
$('a[data-subdomain=\'' + currentSubdomain + '\'][data-default-lang=\'true\'][data-selected-text]')
.data('selected-text');
$('#countrySelectorButtonText').text(currentCountryText);
var visitorPrefDomain = domainUtils.getPrefDomain(currentDomain);
var visitorPrefLang = domainUtils.getPrefLang(currentDomain);
var akamaiCountryCode;
var akamaiprofile = CQ_Analytics.ClientContextMgr.getRegisteredStore('akamaiprofile');
if (akamaiprofile) {
akamaiCountryCode = akamaiprofile.getProperty('countryCode');
}
var recommendedSubdomain;
var recommendedLink;
if (akamaiCountryCode) {
if (countrySubdomains[akamaiCountryCode] !== undefined) {
recommendedSubdomain = countrySubdomains[akamaiCountryCode].subdomain;
} else {
recommendedSubdomain = 'www';
}
if (recommendedSubdomain === 'us') {
recommendedSubdomain = 'www';
}else if (recommendedSubdomain === 'cn') {
recommendedSubdomain = 'ww2';
}
recommendedLink = $('a[data-subdomain=\'' + recommendedSubdomain + '\'][data-recommended-text]');
var countryButtons;
if(recommendedSubdomain === 'ch') {
countryButtons = $('.ch-recommendation .recommendation-button');
$('.ch-recommendation').show();
$('.zh-recommendation').hide();
$('.default-recommendation').hide();
} else if(recommendedSubdomain === 'ww2') {
countryButtons = $('.zh-recommendation .recommendation-button');
$('.zh-recommendation').show();
$('.ch-recommendation').hide();
$('.default-recommendation').hide();
}
} else if (visitorPrefDomain) {
recommendedSubdomain = domainUtils.getSubdomain(visitorPrefDomain);
recommendedLink = $('a[data-subdomain=\'' + recommendedSubdomain + '\'][data-recommended-text]');
var countryButtons;
if(recommendedSubdomain === 'ch') {
countryButtons = $('.ch-recommendation .recommendation-button');
$('.ch-recommendation').show();
$('.zh-recommendation').hide();
$('.default-recommendation').hide();
} else if(recommendedSubdomain === 'ww2') {
countryButtons = $('.zh-recommendation .recommendation-button');
$('.zh-recommendation').show();
$('.ch-recommendation').hide();
$('.default-recommendation').hide();
}
}
if (!recommendedLink) {
recommendedSubdomain = 'www';
recommendedLink = $('a[data-subdomain=\'' + recommendedSubdomain + '\'][data-recommended-text]');
}
$('.recommended-country').text(recommendedLink.data('recommended-text'));
$('#recommended_domain_button').attr('href', recommendedLink.attr('href'));
$('#recommended_domain_button').attr('data-lang', recommendedLink.attr('data-lang'));
if(countryButtons !== undefined) {
countryButtons.click(function(e) {
e.preventDefault();
var selectedDomain = domainUtils.getDomain(this.href);
var selectedLang = $(this).data('lang');
domainUtils.setCookies(selectedDomain, selectedLang);
domainUtils.switchDomain(selectedDomain, selectedLang);
});
} else {
var recommendedDomainButton = $('#recommended_domain_button');
$('.recommended-country-button').text(recommendedLink.data('recommended-text'));
recommendedDomainButton.attr('href', recommendedLink.attr('href'));
recommendedDomainButton.data('lang', recommendedLink.data('lang'));
recommendedDomainButton.click(function (e) {
e.preventDefault();
var selectedDomain = domainUtils.getDomain(this.href);
var selectedLang = $(this).data('lang');
domainUtils.setCookies(selectedDomain, selectedLang);
domainUtils.switchDomain(selectedDomain, selectedLang);
});
}
$('a.worldwide_link').attr('href', recommendedLink.attr('href'));
$('a.worldwide_link').data('lang', recommendedLink.data('lang'));
$('body').on('click', 'a.worldwide_link', function (e) {
e.preventDefault();
var selectedDomain = domainUtils.getDomain(this.href);
var selectedLang = $(this).data('lang');
domainUtils.setCookies(selectedDomain, selectedLang);
var href = e.target.getAttribute('href');
var worldwideLink = '/company/worldwide.html?s_tid=dmselect_cta&requestedDomain=';
if(href) {
location.href = href + worldwideLink;
}
});
if (akamaiCountryCode === 'CN') {
$('#china_performance_alert').show();
}
var crossDomain = "";
if(domainUtils.endsWith(currentDomain, '.mathworks.cn')){
crossDomain = countryCodeToDomainMap.get('www');
}else{
crossDomain = countryCodeToDomainMap.get('ww2');
}
if ((!domainUtils.endsWith(currentDomain, '.mathworks.com') && !domainUtils.endsWith(currentDomain, '.mathworks.cn')) || domainUtils.isExemptUrl(currentUrl)) {
return;
}
if (!visitorPrefDomain) {
if (akamaiCountryCode) {
if (countrySubdomains[akamaiCountryCode] !== undefined) {
akamaiCountryCode = countrySubdomains[akamaiCountryCode].subdomain;
} else {
akamaiCountryCode = 'us';
}
var akamaiDeterminedSubdomain = $('a[data-country-code=\'' + akamaiCountryCode.toUpperCase() + '\']').data('subdomain');
if ((akamaiCountryCode.toLowerCase() === currentSubdomain) || (akamaiDeterminedSubdomain === currentSubdomain)) {
domainUtils.setCookies(currentDomain, "");
} else {
$('#country-unselected').modal('show');
}
return;
}
if (currentSubdomain === 'www') {
domainUtils.setCookies(currentDomain, '');
} else {
$('#country-unselected').modal('show');
}
} else if (akamaiCountryCode === 'CN' && !(visitorPrefDomain === 'CN') && !domainUtils.getCookieVersion(currentDomain)) {
$('#country-unselected').modal('show');
}
});
</script> <script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/global_nav.js.download"></script>

                              <script>!function(a){var e="https://s.go-mpulse.net/boomerang/",t="addEventListener";if("False"=="True")a.BOOMR_config=a.BOOMR_config||{},a.BOOMR_config.PageParams=a.BOOMR_config.PageParams||{},a.BOOMR_config.PageParams.pci=!0,e="https://s2.go-mpulse.net/boomerang/";if(window.BOOMR_API_key="LERXA-6VNES-W6PXS-U8C7F-BXSZH",function(){function n(e){a.BOOMR_onload=e&&e.timeStamp||(new Date).getTime()}if(!a.BOOMR||!a.BOOMR.version&&!a.BOOMR.snippetExecuted){a.BOOMR=a.BOOMR||{},a.BOOMR.snippetExecuted=!0;var i,_,o,r=document.createElement("iframe");if(a[t])a[t]("load",n,!1);else if(a.attachEvent)a.attachEvent("onload",n);r.src="javascript:void(0)",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="width:0;height:0;border:0;display:none;",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(r,o);try{_=r.contentWindow.document}catch(O){i=document.domain,r.src="javascript:var d=document.open();d.domain='"+i+"';void(0);",_=r.contentWindow.document}_.open()._l=function(){var a=this.createElement("script");if(i)this.domain=i;a.id="boomr-if-as",a.src=e+"LERXA-6VNES-W6PXS-U8C7F-BXSZH",BOOMR_lstart=(new Date).getTime(),this.body.appendChild(a)},_.write("<bo"+'dy onload="document._l();">'),_.close()}}(),"".length>0)if(a&&"performance"in a&&a.performance&&"function"==typeof a.performance.setResourceTimingBufferSize)a.performance.setResourceTimingBufferSize();!function(){if(BOOMR=a.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.AK){var e=""=="true"?1:0,t="",n="nctzqqlikzifyzrnrucq-f-f04061aaf-clientnsv4-s.akamaihd.net",i="false"=="true"?2:1,_={"ak.v":"37","ak.cp":"1460359","ak.ai":parseInt("195948",10),"ak.ol":"0","ak.cr":19,"ak.ipv":4,"ak.proto":"h2","ak.rid":"190f1f2c","ak.r":41489,"ak.a2":e,"ak.m":"x","ak.n":"essl","ak.bpcip":"104.167.152.0","ak.cport":54506,"ak.gh":"23.220.106.153","ak.quicv":"","ak.tlsv":"tls1.3","ak.0rtt":"","ak.csrc":"-","ak.acc":"","ak.t":"1714261253","ak.ak":"hOBiQwZUYzCg5VSAfCLimQ==Tc/uyufD2r9X3HBJO+H6O4ea6Tkd8Ya4uZeq9anZ6dm9liI39BSa/y5vLJ4bBIQLLPNfAdjWHbDgIG7nbs/5WZ0U9NoVrAZptP1oRrS1k7mSsQTEX62FsaCCEanO0R/7Id6DD2rnUbDqqrC+ZTcJ1LGycQiZJUI4gpl3vvbDQrKDJ3qIQFPCYZEKzwSTfoe3BkDMempKmYv/WrZCEVyaZDwixw/bUqmwlfyGBGh1ahcx/G9+5VVjFxSiUNkYHaD6aRlgazuHfMP7YHiJWlieXEyQod9bWEqwQyYPxM+e8cr833xu1oQ4aYeuZQ75gK/pWm2JuumiQLZsWvSlX3HwWdjDlhq0nUUBRnSX9iHyVQdVexUwEcYp+LdeO7vPWPUoLa4w+DkPHuHwCNGrUf1T3xin/tzfbdea+ePQgnHrHT0=","ak.pv":"181","ak.dpoabenc":"","ak.tf":i};if(""!==t)_["ak.ruds"]=t;var o={i:!1,av:function(e){var t="http.initiator";if(e&&(!e[t]||"spa_hard"===e[t]))_["ak.feo"]=void 0!==a.aFeoApplied?1:0,BOOMR.addVar(_)},rv:function(){var a=["ak.bpcip","ak.cport","ak.cr","ak.csrc","ak.gh","ak.ipv","ak.m","ak.n","ak.ol","ak.proto","ak.quicv","ak.tlsv","ak.0rtt","ak.r","ak.acc","ak.t","ak.tf"];BOOMR.removeVar(a)}};BOOMR.plugins.AK={akVars:_,akDNSPreFetchDomain:n,init:function(){if(!o.i){var a=BOOMR.subscribe;a("before_beacon",o.av,null,null),a("onbeacon",o.rv,null,null),o.i=!0}return this},is_complete:function(){return!0}}}}()}(window);</script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/AppMeasurement.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/AppMeasurement_Module_ActivityMap.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RC0c0f81ed410e441bb7237cfa16e2d916-source.min.js.download" async=""></script><style type="text/css"> .qc-cmp-button {    background-color: #0076a8 !important;    border-color: #0076a8 !important;  }  .qc-cmp-button:hover {    border-color: #0076a8 !important;  }  .qc-cmp-alt-action,  .qc-cmp-link {    color: #0076a8 !important;  }  .qc-cmp-button.qc-cmp-secondary-button:hover {    background-color: #0076a8 !important;    border-color: #0076a8 !important;  }  .qc-cmp-button.qc-cmp-secondary-button:hover {    color: #ffffff !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    color: #0076a8 !important;  }  .qc-cmp-button.qc-cmp-secondary-button {    background-color: #eee !important;    border-color: transparent !important;  }  .qc-cmp-ui,  .qc-cmp-ui .qc-cmp-title,  .qc-cmp-ui .qc-cmp-table,  .qc-cmp-ui .qc-cmp-messaging,  .qc-cmp-ui .qc-cmp-sub-title,  .qc-cmp-ui .qc-cmp-vendor-list,  .qc-cmp-ui .qc-cmp-purpose-info,  .qc-cmp-ui .qc-cmp-table-header,  .qc-cmp-ui .qc-cmp-beta-messaging,  .qc-cmp-ui .qc-cmp-main-messaging,  .qc-cmp-ui .qc-cmp-vendor-list-title{    color: #1a1a1a !important;  }  .qc-cmp-ui a,  .qc-cmp-ui .qc-cmp-alt-action {    color: #0076a8 !important;  }  .qc-cmp-ui {    background-color: #fef9ed !important;  } .dvsjko.dvsjko.dvsjko.dvsjko .qc-cmp2-footer .qc-cmp2-summary-buttons button { border-radius: 4px; }.dvsjko.dvsjko.dvsjko.dvsjko .qc-cmp2-footer .qc-cmp2-summary-buttons button:last-child:hover { background-color: #3391b9; }.iicKQX.iicKQX .qc-cmp2-footer .qc-cmp2-buttons-desktop button { border-radius: 4px; }.iicKQX.iicKQX .qc-cmp2-footer .qc-cmp2-buttons-desktop button:last-of-type:hover { background-color: #3391b9; }.iicKQX.iicKQX .qc-cmp2-footer > button { border-radius: 4px; }</style><style>
.headernav_matrix button { 
  width:24px; 
  height:24px; 
  padding:0;
  border: none;
  background:none transparent; 
  display:inline-block;
  transition:color .3s ease;
  position: relative;
}

.headernav_matrix button > .icon-matrix { color:#777; font-size:24px; line-height:1.00 !important;}
.headernav_matrix button:hover > .icon-matrix,
.headernav_matrix button:focus > .icon-matrix { color:#333; }

/* MATRIX MENU TABLET AND MOBILE*/
#header_mobile .matrix_container { 
  margin:1px auto 0; 
  border:none; 
  box-shadow:none; 
  background:#fff; 
  float:none; 
  overflow:hidden; 
  position:relative;
  z-index:3;
  display:block !important; 
  height:auto !important;
}
#header_mobile .headernav_matrix > button { 
  width:auto; 
  min-width:37px; 
  height:auto; 
  min-height:37px; 
  margin:3.5px -1.5px 0 0; 
  float:right; 
}
#header_mobile .headernav_matrix > button > .icon-matrix { color:#0076a8; }

@media (min-width:768px) and (max-width:991px) {
  .matrix_menu_container_mobile { border-top:1px solid #e7e7e7; }
}

/* DESKTOP MATRIX MENU */
.matrix_container { 
  width:319px; 
  padding:0 10px 10px; 
  margin-top:2px; 
  border:1px solid #999; 
  background:#fff; 
  box-shadow:0 1px 3px 0 rgba(0,0,0,0.25); 
  float:right; 
  overflow:hidden; 
  position:absolute; 
  right:0; 
  z-index:1037; 
}
.matrix_container ul.matrix_links_primary { 
  border-bottom:1px solid #ccc; 
}
.matrix_container ul[class*="matrix_links_"] { 
  width:100%; 
  padding:10px 0 0; 
  margin-bottom:0; 
  float:left; 
} 
.matrix_container ul[class*="matrix_links_"] > li { 
  width:99px; 
  height:72px;
  padding:0 5px;
  margin:0 0 10px; 
  float:left;
  font-size:12px; 
  line-height:1.25; 
  text-align:center; 
  white-space:nowrap; 
} 
.matrix_container ul[class*="matrix_links_"] > li > a { 
  width:100%; 
  padding:7px 0 0 0; 
  border:none;
  color: #0076a8 !important;
  background:transparent; 
  display:block; 
  text-decoration:none !important; 
}

.matrix_container ul[class*="matrix_links_"] > li > a > img { 
  height:38px; 
  padding:2px; 
  width:auto; 
  margin:0 auto 7px; 
  border:1px solid transparent; 
  border-radius:5px; 
  background-color:#fff; 
  display:block; 
  transition:background-color .3s ease, border-color 0.3s ease; 
}
.matrix_container ul[class*="matrix_links_"] > li > a > .matrix_link_title { 
  max-width:89px; 
  display:block; 
  line-height:1.15; 
  white-space:normal; 
}

.matrix_container ul[class*="matrix_links_"] > li > a:hover > img,
.matrix_container ul[class*="matrix_links_"] > li.matrix_active > a > img { 
  border-color:#999;  
  background-color:#f5f5f5; 
}
.matrix_container_zh { 
  font-family:"Microsoft YaHei","Segoe UI",Arial,Helvetica; 
}
.matrix_container_ja { 
  font-family:Meiryo,Verdana,Arial,Helvetica,"MS P ゴシック"; 
}
.matrix_container_kr { 
  font-family:Malgun Gothic, Apple Gothic, Arial, sans-serif; 
}

[class*="matrix_container_"].matrix_container ul[class*="matrix_links_"] > li { 
  height:90px; 
}
[class*="matrix_container_"] { padding-bottom:0; }
[class*="matrix_container_"].matrix_container ul[class*="matrix_links_"] > li > a { 
  padding-bottom:2px; 
}
[class*="matrix_container_"].matrix_container .matrix_link_title { 
  font-size:13px !important; 
  line-height:1.20 !important; 
}</style><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RC7835c170a7804f76821ed96f49114711-source.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/js" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RC20a6019042b542298807cdc9e182767d-source.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RCb721adba20764bcfb94f83ebfb62dc6b-source.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RCedfaed1d03de47189f18649f7e2d6cb0-source.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/last-event-tag-latest.min.js.download"></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RC05fd1ce7514f4ecb83fb546a37c08e91-source.min.js.download" async=""></script><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/RCc87629ec9c1c4dc4bc3f3373afa48760-source.min.js.download" async=""></script><style type="text/css" id="ki-z39-zjk"></style><style type="text/css" id="ki-z39-zj0"></style><style type="text/css" id="ki-z39-zjk"></style><style type="text/css" id="ki-z39-zj0"></style></head>

<body id="responsive_offcanvas" class="no_animate offcanvas_active">
  <a class="skip_link sr-only" href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#skip_link_anchor">Skip to content</a>

  <!-- Mobile TopNav: Start -->
<div class="header visible-xs visible-sm" id="header_mobile" translate="no" style="">
<nav class="navbar navbar-default" role="navigation">
<div class="navbar-header">
<div class="container-fluid">
<div class="row">
<div class="col-xs-3">
<button type="button" class="navbar-toggle topnav_toggle" data-toggle="collapse" data-target="#topnav_collapse">
<span class="sr-only">Toggle Main Navigation</span>
<span class="icon-menu"></span>
</button>
</div>
<div class="col-xs-6">
<div class="text-center">
<a href="https://www.mathworks.com/?s_tid=gn_logo" class="svg_link navbar-brand">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/pic-header-mathworks-logo.svg" class="mw_logo" alt="MathWorks">
</a>
</div>
</div>
<div class="col-xs-3">
<div class="matrix_affordance_container_mobile" id="matrix_affordance_container_mobile"><div id="headernav_matrix_small" class="headernav_matrix"><button title="Matrix Menu" class="navbar-toggle matrix_toggle" data-toggle="collapse" data-target="#matrix_collapse" id="matrix_waffle_small" aria-label="Mathworks Menu" type="button"><span class="icon-matrix"></span></button></div></div>
</div>
</div>
</div>
</div>
<div class="container-fluid">
<div class="row visible-xs visible-sm">
<div class="col-xs-12">
<div class="navbar-collapse collapse" id="topnav_collapse">
<ul class="nav navbar-nav topnav" id="topnav_mobile"><li class="headernav_login"><a href="https://www.mathworks.com/login?uri=https%3A%2F%2Fwww.mathworks.com%2Fhelp%2Fvision%2Fug%2Fmonocular-visual-simultaneous-localization-and-mapping.html" class="mwa-nav_login"><span class="visible-xs visible-sm">Sign In <span class="sr-only">to Your MathWorks Account</span></span><span class="visible-lg visible-md"><span class="sr-only">Sign In to Your MathWorks Account</span></span></a></li>
<li class="topnav_products "><a href="https://www.mathworks.com/products.html?s_tid=gn_ps">Products</a></li>
<li class="topnav_solutions "><a href="https://www.mathworks.com/solutions.html?s_tid=gn_sol">Solutions</a></li>
<li class="topnav_academia "><a href="https://www.mathworks.com/academia.html?s_tid=gn_acad">Academia</a></li>
<li class="topnav_support "><a href="https://www.mathworks.com/help/?s_tid=gn_supp">Support</a></li>
<li class="topnav_community "><a href="https://www.mathworks.com/matlabcentral/?s_tid=gn_mlc">Community</a></li>
<li class="topnav_events "><a href="https://www.mathworks.com/company/events.html?s_tid=gn_ev">Events</a></li>
<li class="headernav_store"><a href="https://login.mathworks.com/embedded-login/landing.html?cid=getmatlab&amp;s_tid=gn_getml">Get MATLAB</a></li>
</ul>
</div>
<div class="navbar-collapse collapse" id="matrix_collapse">
<div class="matrix_menu_container_mobile" id="matrix_menu_container_mobile"><header class="App-header"><div class="matrix_container collapse" aria-describedby="matrix_title"><nav class="matrix_content"><h3 class="sr-only" id="matrix_title">MathWorks Matrix Menu</h3><ul class="list-unstyled matrix_links_primary"><li class=""><a class="svg_link" href="https://matlab.mathworks.com/" role="button" aria-label="MATLAB" id="matrix_link_matlab_home"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-matlabonline.svg" alt="matlab_home" aria-hidden="true"><span class="matrix_link_title">MATLAB</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/help/" role="button" aria-label="Help Center" id="matrix_link_help_center"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-helpcenter.svg" alt="help_center" aria-hidden="true"><span class="matrix_link_title">Help Center</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/" role="button" aria-label="MathWorks" id="matrix_link_mathworks_dotcom"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-mathworks.svg" alt="mathworks_dotcom" aria-hidden="true"><span class="matrix_link_title">MathWorks</span></a></li></ul><ul class="list-unstyled matrix_links_secondary"><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/answers/index" role="button" aria-label="MATLAB Answers" id="matrix_link_answers"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-answers.svg" alt="answers" aria-hidden="true"><span class="matrix_link_title">MATLAB Answers</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/fileexchange" role="button" aria-label="File Exchange" id="matrix_link_file_exchange"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-fileexchange.svg" alt="file_exchange" aria-hidden="true"><span class="matrix_link_title">File Exchange</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/videos.html" role="button" aria-label="Videos" id="matrix_link_videos"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-videos.svg" alt="videos" aria-hidden="true"><span class="matrix_link_title">Videos</span></a></li><li class=""><a class="svg_link" href="https://matlabacademy.mathworks.com/" role="button" aria-label="Online Training" id="matrix_link_online_training"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-onlinetraining.svg" alt="online_training" aria-hidden="true"><span class="matrix_link_title">Online Training</span></a></li><li class=""><a class="svg_link" href="https://blogs.mathworks.com/" role="button" aria-label="Blogs" id="matrix_link_blogs"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-blogs.svg" alt="blogs" aria-hidden="true"><span class="matrix_link_title">Blogs</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/cody" role="button" aria-label="Cody" id="matrix_link_cody"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-cody.svg" alt="cody" aria-hidden="true"><span class="matrix_link_title">Cody</span></a></li><li class=""><a class="svg_link" href="https://drive.mathworks.com/" role="button" aria-label="MATLAB Drive" id="matrix_link_matlab_drive"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-matlabdrive.svg" alt="matlab_drive" aria-hidden="true"><span class="matrix_link_title">MATLAB Drive</span></a></li><li class=""><a class="svg_link" href="https://thingspeak.com/" role="button" aria-label="ThingSpeak" id="matrix_link_thingspeak"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-thingspeak.svg" alt="thingspeak" aria-hidden="true"><span class="matrix_link_title">ThingSpeak</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/support/bugreports/" role="button" aria-label="Bug Reports" id="matrix_link_bug_reports"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-bugreports.svg" alt="bug_reports" aria-hidden="true"><span class="matrix_link_title">Bug Reports</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/" role="button" aria-label="Community" id="matrix_link_community"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-community.svg" alt="community" aria-hidden="true"><span class="matrix_link_title">Community</span></a></li></ul></nav></div></header></div>
</div>
</div>
</div>
</div>
</nav>
</div>
<!-- Mobile TopNav: End -->
<!-- Desktop TopNav: Start -->
<div class="header hidden-xs hidden-sm" id="header_desktop" translate="no">
<nav class="navbar navbar-default" role="navigation">
<div class="container-fluid">
<div class="row">
<div class="col-md-9">
<div class="navbar-header">
<div class="logo_container hidden-xs hidden-sm">
<a href="https://www.mathworks.com/?s_tid=gn_logo" class="svg_link pull-left">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/pic-header-mathworks-logo.svg" class="mw_logo" alt="MathWorks">
</a>
</div>
<div class="navbar-collapse collapse hidden-xs hidden-sm">
<ul class="nav navbar-nav topnav" id="topnav_desktop">
<li class="topnav_products "><a href="https://www.mathworks.com/products.html?s_tid=gn_ps">Products</a></li>
<li class="topnav_solutions "><a href="https://www.mathworks.com/solutions.html?s_tid=gn_sol">Solutions</a></li>
<li class="topnav_academia "><a href="https://www.mathworks.com/academia.html?s_tid=gn_acad">Academia</a></li>
<li class="topnav_support "><a href="https://www.mathworks.com/help/?s_tid=gn_supp">Support</a></li>
<li class="topnav_community "><a href="https://www.mathworks.com/matlabcentral/?s_tid=gn_mlc">Community</a></li>
<li class="topnav_events "><a href="https://www.mathworks.com/company/events.html?s_tid=gn_ev">Events</a></li>
</ul>
</div>
</div>
</div>
<div class="col-md-3">
<div class="collapse navbar-collapse" id="headernav_collapse">
<ul class="nav navbar-nav navbar-right" id="headernav">
<li class="headernav_store"><a href="https://login.mathworks.com/embedded-login/landing.html?cid=getmatlab&amp;s_tid=gn_getml" class="btn btn_color_blue companion_btn btn-xs">Get MATLAB</a></li>
<li class="headernav_login"><a href="https://www.mathworks.com/login?uri=https%3A%2F%2Fwww.mathworks.com%2Fhelp%2Fvision%2Fug%2Fmonocular-visual-simultaneous-localization-and-mapping.html" class="mwa-nav_login"><span class="visible-xs visible-sm">Sign In <span class="sr-only">to Your MathWorks Account</span></span><span class="visible-lg visible-md"><span class="sr-only">Sign In to Your MathWorks Account</span></span></a></li><li id="headernav_matrix" class="headernav_matrix"><div id="wrapper"><button title="Matrix Menu" class="waffle" id="matrix_waffle_large" aria-label="Mathworks Menu" type="button"><span class="icon-matrix"></span></button><header class="App-header"><div class="matrix_container collapse" aria-describedby="matrix_title"><nav class="matrix_content"><h3 class="sr-only" id="matrix_title">MathWorks Matrix Menu</h3><ul class="list-unstyled matrix_links_primary"><li class=""><a class="svg_link" href="https://matlab.mathworks.com/" role="button" aria-label="MATLAB" id="matrix_link_matlab_home"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-matlabonline.svg" alt="matlab_home" aria-hidden="true"><span class="matrix_link_title">MATLAB</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/help/" role="button" aria-label="Help Center" id="matrix_link_help_center"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-helpcenter.svg" alt="help_center" aria-hidden="true"><span class="matrix_link_title">Help Center</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/" role="button" aria-label="MathWorks" id="matrix_link_mathworks_dotcom"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-mathworks.svg" alt="mathworks_dotcom" aria-hidden="true"><span class="matrix_link_title">MathWorks</span></a></li></ul><ul class="list-unstyled matrix_links_secondary"><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/answers/index" role="button" aria-label="MATLAB Answers" id="matrix_link_answers"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-answers.svg" alt="answers" aria-hidden="true"><span class="matrix_link_title">MATLAB Answers</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/fileexchange" role="button" aria-label="File Exchange" id="matrix_link_file_exchange"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-fileexchange.svg" alt="file_exchange" aria-hidden="true"><span class="matrix_link_title">File Exchange</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/videos.html" role="button" aria-label="Videos" id="matrix_link_videos"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-videos.svg" alt="videos" aria-hidden="true"><span class="matrix_link_title">Videos</span></a></li><li class=""><a class="svg_link" href="https://matlabacademy.mathworks.com/" role="button" aria-label="Online Training" id="matrix_link_online_training"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-onlinetraining.svg" alt="online_training" aria-hidden="true"><span class="matrix_link_title">Online Training</span></a></li><li class=""><a class="svg_link" href="https://blogs.mathworks.com/" role="button" aria-label="Blogs" id="matrix_link_blogs"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-blogs.svg" alt="blogs" aria-hidden="true"><span class="matrix_link_title">Blogs</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/cody" role="button" aria-label="Cody" id="matrix_link_cody"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-cody.svg" alt="cody" aria-hidden="true"><span class="matrix_link_title">Cody</span></a></li><li class=""><a class="svg_link" href="https://drive.mathworks.com/" role="button" aria-label="MATLAB Drive" id="matrix_link_matlab_drive"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-matlabdrive.svg" alt="matlab_drive" aria-hidden="true"><span class="matrix_link_title">MATLAB Drive</span></a></li><li class=""><a class="svg_link" href="https://thingspeak.com/" role="button" aria-label="ThingSpeak" id="matrix_link_thingspeak"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-thingspeak.svg" alt="thingspeak" aria-hidden="true"><span class="matrix_link_title">ThingSpeak</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/support/bugreports/" role="button" aria-label="Bug Reports" id="matrix_link_bug_reports"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-bugreports.svg" alt="bug_reports" aria-hidden="true"><span class="matrix_link_title">Bug Reports</span></a></li><li class=""><a class="svg_link" href="https://www.mathworks.com/matlabcentral/" role="button" aria-label="Community" id="matrix_link_community"><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-matrix-community.svg" alt="community" aria-hidden="true"><span class="matrix_link_title">Community</span></a></li></ul></nav></div></header></div></li></ul>
</div>
</div>
</div>
</div>
</nav>
</div>
<!-- Desktop TopNav: End -->
<!-- Conjoined Header: Start -->
<!-- Section Header: Start -->
<div class="section_header level_3">
<div class="container-fluid">
<div class="row" id="mobile_search_row">
<div class="col-sm-6 col-md-7 has_horizontal_local_nav" id="section_header_title">
<div class="section_header_content">
<div class="section_header_title">
<p class="h1"><a xmlns="http://www.w3.org/1999/xhtml" href="https://www.mathworks.com/help/index.html" class="coming_from_product">Help Center</a><a xmlns="http://www.w3.org/1999/xhtml" href="https://www.mathworks.com/help/index.html" class="not_coming_from_product">Help Center</a></p>
</div>
</div>
</div>
<div class="col-xs-12 col-sm-6 col-md-5" id="mobile_search">
<div class="search_nested_content_container">
<div id="search_scope_support" class="collapse in"> <form id="docsearch_form" action="https://www.mathworks.com/support/search.html" method="get" accept-charset="utf-8" data-release="R2024a" data-language="en">
<div class="input-group">
<label class="sr-only">Search Help Center</label>
<input id="suggestion" type="hidden" name="suggestion" value="">
<span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
<input id="docsearch" class="form-control conjoined_search" type="search" name="q" placeholder="Search Help Center" autocomplete="off">
<div class="input-group-btn">
<button type="button" class="btn btn_search_adjacent dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Search Scope"><span class="caret"></span><span class="search_scope_label">Help Center</span></button>
<ul class="dropdown-menu list-unstyled dropdown-menu-right" role="menu">
<!--<li data-toggle="collapse" data-target="#search_scope_support"><a href="#">Support</a></li>-->
<li data-target="#search_scope_support" class="site_search_scope_trigger"><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#">Help Center</a></li>
<li data-target="#search_scope_site" class="support_search_scope_trigger"><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#">MathWorks</a></li>
</ul>
<button type="submit" name="submitsearch" id="support_submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16"></button>
</div>
</div>
</form>
</div>
<div id="search_scope_site" class="collapse"> <form name="search" id="site_search" class="site_search" action="https://www.mathworks.com/search/site_search.html" method="get">
<div class="input-group">
<label class="sr-only">Search MathWorks.com</label>
<input type="hidden" name="c[]" value="entire_site">
<input type="search" name="q" id="query" class="form-control conjoined_search" placeholder="Search MathWorks.com" autocomplete="off">
<div class="input-group-btn">
<button type="button" class="btn btn_search_adjacent dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Search Scope"><span class="caret"></span><span class="search_scope_label">MathWorks</span></button>
<ul class="dropdown-menu list-unstyled dropdown-menu-right" role="menu">
<li data-target="#search_scope_site" class="support_search_scope_trigger"><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#">MathWorks</a></li>
<li data-target="#search_scope_support" class="site_search_scope_trigger"><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#">Help Center</a></li>
</ul>
<button type="submit" id="searchbutton" class="btn icon-search btn_search_adjacent btn_search icon_16"></button>
</div>
</div>
</form>
</div>
<script>
$('[id*="search_scope"] li[class*="scope_trigger"] a').click(function() {
var selected_search = $(this).closest('li').attr('data-target');
var current_search_form = '#' + $(this).closest('form').attr('id');
if ($(current_search_form + ' .conjoined_search').val()) {
var current_search_value = $(current_search_form + ' .conjoined_search').val();
$(selected_search + ' .conjoined_search').val(current_search_value);
}
$('[id*="search_scope"]').removeClass("in");
$(selected_search).addClass("in");
});
</script>
</div>
<button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"><span class="sr-only">Close Mobile Search</span></button>
</div>
<div class="visible-xs" id="search_actuator">
<button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"><span class="sr-only">Open Mobile Search</span></button>
</div>
</div>
</div>
</div>
<!-- Section Header: End -->
<!-- Conjoined Header: End -->

  <div class="row-offcanvas row-offcanvas-left active">
  
    <div class="sidebar-offcanvas" id="sidebar" style="height: 821px; position: absolute;">
      <nav class="offcanvas_nav" role="navigation"> 
      
        <div class="offcanvas_actuator active" data-toggle="offcanvas" data-target="#sidebar" id="nav_toggle">
          <button type="button" class="btn">
            <span class="icon-menu"><span class="sr-only">Off-Canvas Navigation Menu Toggle</span></span>
          </button>
          <span class="offcanvas_actuator_label" id="translation_icon-menu" tabindex="-1" aria-hidden="true"></span>
          <!-- <span class="offcanvas_actuator_close" tabindex="-1" aria-hidden="true"></span> -->
        </div>

          <div class="nav_list_wrapper" id="nav_list_wrapper">
            <nav class="offcanvas_nav" role="navigation">
                <ul xmlns="http://www.w3.org/1999/xhtml" class="nav_breadcrumb" id="ul_left_nav_ancestors"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="https://www.mathworks.com/help/index.html?s_tid=CRUX_lftnav" itemprop="url"><span itemprop="title">Documentation Home</span></a></li></ul><ul xmlns="http://www.w3.org/1999/xhtml" class="nav_breadcrumb" id="ul_left_nav_productgroups"><li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="https://www.mathworks.com/help/overview/image-processing-and-computer-vision.html?s_tid=hc_product_group_bc" itemprop="url"><span itemprop="title">Image Processing and Computer Vision</span></a></li></ul>
<ul xmlns="http://www.w3.org/1999/xhtml" class="nav_disambiguation"><li><a href="https://www.mathworks.com/help/vision/index.html?s_tid=CRUX_lftnav" id="index">Computer Vision Toolbox</a>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="https://www.mathworks.com/help/vision/getting-started-with-computer-vision-system-toolbox.html?s_tid=CRUX_lftnav" itemprop="url" id="getting-started-with-computer-vision-system-toolbox"><span itemprop="title">Get Started with Computer Vision Toolbox</span></a></li></ul><ul xmlns="http://www.w3.org/1999/xhtml" class="nav_disambiguation"><li><a href="https://www.mathworks.com/help/vision/index.html?s_tid=CRUX_lftnav" id="index">Computer Vision Toolbox</a>
</li>
<li><a href="https://www.mathworks.com/help/vision/structure-from-motion-and-visual-slam.html?s_tid=CRUX_lftnav">Structure from Motion and Visual SLAM</a></li><li><a href="https://www.mathworks.com/help/vision/visual-simultaneous-localization-and-mapping-slam.html?s_tid=CRUX_lftnav" id="mw_93296e64-eee4-452a-a4e0-2c0efd5cb925">vSLAM</a></li></ul><ul xmlns="http://www.w3.org/1999/xhtml" class="nav_scrollspy nav" id="pnav">
<li class="nav_scrollspy_function active"><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#responsive_offcanvas">Monocular Visual Simultaneous Localization and Mapping</a></li>
<li class="nav_scrollspy_title" id="SSPY810-section">On this page</li>
<!--ADD_REFENTRY_TITLE_HERE 11--><li class=""><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-1" class="intrnllnk">Glossary</a></li><li class=""><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-2" class="intrnllnk">Overview of ORB-SLAM</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-3" class="intrnllnk">Download and Explore the Input Image Sequence</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-4" class="intrnllnk">Map Initialization</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-5" class="intrnllnk">Store Initial Key Frames and Map Points</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-6" class="intrnllnk">Initialize Place Recognition Database</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-7" class="intrnllnk">Refine and Visualize the Initial Reconstruction</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-8" class="intrnllnk">Tracking</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-9" class="intrnllnk">Local Mapping</a></li><li class=""><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-10" class="intrnllnk">Loop Closure</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-11" class="intrnllnk">Compare with the Ground Truth</a></li><li class=""><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-12" class="intrnllnk">Code Generation</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-13" class="intrnllnk">Supporting Functions</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#MonocularVisualSimultaneousLocalizationAndMappingExample-14" class="intrnllnk">Reference</a></li><li><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#d126e4527" class="intrnllnk">Related Topics</a></li></ul>

            </nav>
          </div>
        
        <script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/offcanvas_v2.js.download"></script>
        

      </nav>       
    </div>

    <!-- MOBILE CTA - Begin -->
    <!-- MOBILE CTA - End -->


    <div class="offcanvas_content_container" style="padding-right: 0px;">

      <div class="sticky_header_container affix" style="width: auto;">
        <div class="horizontal_nav">
          <div class="horizontal_nav_container">
            <div class="offcanvas_horizontal_nav">
              <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 col-md-7 col-lg-8 hidden-xs">
                    
                    <script>
                      var translateMore = translateMore || {};
                      translateMore.locale = "More"; 
                    </script>

                    <nav class="navbar navbar-default" role="navigation" id="subnav">
                      <div>
                          <ul class="nav navbar-nav crux_browse">
                        <li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_documentation" class="crux_resource active">Documentation</li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_example" class="crux_resource"><a href="https://www.mathworks.com/help/vision/examples.html?category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Examples</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_function" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=function&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Functions</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_block" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=block&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Blocks</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_app" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=app&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Apps</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_videos" class="supplemental_crux_resource"><a href="https://www.mathworks.com/support/search.html?fq[]=asset_type_name:video%20category:vision/getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav" class="not_coming_from_product">Videos</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_answers" class="supplemental_crux_resource"><a href="https://www.mathworks.com/support/search.html?fq[]=asset_type_name:answer%20category:vision/getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav" class="not_coming_from_product">Answers</a></li>
                        </ul>
                      </div>
                    </nav>
                  </div>
                    <div class="col-md-5 col-lg-4 hidden-xs hidden-sm">
                      <div class="cta_box">
<ul class="list-inline">
<li class="cta_item cta_item_general hidden-sm hidden-xs "><a href="https://www.mathworks.com/campaigns/products/trials.html?prodcode=VP&amp;s_tid=doc_trial_VP_tb" class="icon-download">Trial Software</a></li>
<li class="hidden-lg hidden-md "><a href="https://www.mathworks.com/campaigns/products/trials.html?prodcode=VP&amp;s_tid=doc_trial_VP_tb" class="btn btn_color_blue btn-block"><span class="icon-download"></span> Trial Software</a></li>
<li class="cta_item cta_item_general hidden-sm hidden-xs "><a href="https://www.mathworks.com/support/web_downloads_bounce.html?s_tid=hc_prod_update&amp;s_cid=1008_degr_docdn_270055" class="icon-download">Product Updates</a></li>
<li class="hidden-lg hidden-md "><a href="https://www.mathworks.com/support/web_downloads_bounce.html?s_tid=hc_prod_update&amp;s_cid=1008_degr_docdn_270055" class="btn btn_color_blue btn-block"><span class="icon-download"></span> Product Updates</a></li>
</ul>
</div>
                    </div>
                  <!-- Mobile CRUX Nav: START -->
                  <div class="visible-xs">
                    <div class="container-fluid">
                      <div class="row">
                        <div class="col-xs-9"> 
                          <div class="mobile_crux_nav_trigger">
                            <!-- Single button -->
                            <div class="btn-group">
                              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Resources <span class="icon-arrow-down icon_16"></span>  
                              </button>
                              <ul class="dropdown-menu">
                                <li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_documentation" class="crux_resource active">Documentation</li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_example" class="crux_resource"><a href="https://www.mathworks.com/help/vision/examples.html?category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Examples</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_function" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=function&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Functions</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_block" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=block&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Blocks</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_app" class="crux_resource"><a href="https://www.mathworks.com/help/vision/referencelist.html?type=app&amp;category=getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav">Apps</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_videos" class="supplemental_crux_resource"><a href="https://www.mathworks.com/support/search.html?fq[]=asset_type_name:video%20category:vision/getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav" class="not_coming_from_product">Videos</a></li><li xmlns="http://www.w3.org/1999/xhtml" id="crux_nav_answers" class="supplemental_crux_resource"><a href="https://www.mathworks.com/support/search.html?fq[]=asset_type_name:answer%20category:vision/getting-started-with-computer-vision-system-toolbox&amp;s_tid=CRUX_topnav" class="not_coming_from_product">Answers</a></li>
                              </ul>
                            </div>
                            <!-- Single button -->                      
                          </div>
                        </div>
                        <div class="col-xs-3">
                          <div class="translate_placeholder"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Mobile CRUX Nav: END -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content_container" id="content_container" style="width: auto;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-xs-12">
              <div id="offcanvas_focus_actuator" tabindex="0" class="visible-xs"><span class="sr-only">Main Content</span></div>
              <main id="skip_link_anchor" tabindex="-1">
                           





                         
    
                                       
<div xmlns="http://www.w3.org/1999/xhtml" id="product_info_alert"></div><section xmlns="http://www.w3.org/1999/xhtml" id="doc_center_content" itemprop="content" lang="en" data-language="en"><div id="pgtype-topic">
<section itemprop="content"><h1 class="r2024a" itemprop="title content" id="mw_3eb27c60-ed2c-4eb7-8c66-4f53a04fbc22">Monocular Visual Simultaneous Localization and Mapping</h1><div class="examples_short_list hidden_ios_android" data-products="ML VP ME"><div data-pane="metadata" class="panel metadata_container panel-default"><div class="panel-body metadata_content open_example_div"><p class="add_margin_5">This example uses:</p><ul class="list-unstyled add_border_bottom example_product_list" itemprop="requiredprods"><li><a class="coming_from_product" href="matlab:matlab.internal.addons.showAddon(&#39;VP&#39;)">Computer Vision Toolbox</a><a class="not_coming_from_product" href="https://www.mathworks.com/help/vision/index.html">Computer Vision Toolbox</a></li><li><a class="coming_from_product" href="matlab:matlab.internal.addons.showAddon(&#39;ME&#39;)">MATLAB Coder</a><a class="not_coming_from_product" href="https://www.mathworks.com/help/coder/index.html">MATLAB Coder</a></li></ul><button type="button" class="btn companion_btn btn_color_blue btn-block copy_cmd_btn" data-toggle="popover" data-placement="bottom" data-trigger="hover focus" title="" data-html="true" data-content="&lt;code&gt;openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)&lt;/code&gt;" data-original-title="MATLAB Command"><span class="icon-mw-copy"><span class="sr-only">Copy Code</span></span>&nbsp; Copy Command</button></div></div></div><div itemscope="" itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage/Example" itemprop="example" class="em_example"><meta itemprop="exampleid" content="vision-MonocularVisualSimultaneousLocalizationAndMappingExample"><meta itemprop="exampletitle" content="Monocular Visual Simultaneous Localization and Mapping"></div><span id="MonocularVisualSimultaneousLocalizationAndMappingExample" class="anchor_target"></span><p class="shortdesc">Visual simultaneous localization and mapping (vSLAM), refers to the process of calculating the position and orientation of a camera with respect to its surroundings, while simultaneously mapping the environment. The process uses only visual inputs from the camera. Applications for vSLAM include augmented reality, robotics, and autonomous driving.</p><p>There are two versions of vSLAM implementations shown in the examples:</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">Modular and Modifiable </strong>─ Builds a visual SLAM pipeline step-by-step by using functions and objects. For more details and a list of these functions and objects, see the <a href="https://www.mathworks.com/help/vision/ug/visual-simultaneous-localization-and-mapping-slam-overview.html" data-docid="vision_ug#mw_b29d21ad-831b-4434-be26-6ef2ea144561" class="a">Implement Visual SLAM in MATLAB</a> topic. The approach described in the topic contains modular code and it is designed to teach the details of the vSLAM implementation, which is loosely based on the popular and reliable ORB-SLAM<a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_A54BE93B"> </a><a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_A54BE93B" class="intrnllnk">[1] </a>algorithm. The code is easily navigable, allowing you to understand the algorithm and test how its parameters can impact the performance of the system. This modular implementation is most suitable for learning, experimentation, and modification to test your own ideas. </p></li><li><p><strong class="emphasis bold">Performant and Deployable</strong> ─ Uses the monovslam object which contains a complete vSLAM workflow. The object offers a practical solution with greatly improved execution speed and code generation. To generate multi-threaded C/C++ code from <a href="https://www.mathworks.com/help/vision/ref/monovslam.html" data-docid="vision_ref#mw_43ffdccf-bf66-4d77-95bf-e86c86b2c64b" class="a"><code class="olink">monovslam</code></a>, you can use MATLAB Coder. The generated code is portable and can also be deployed on non-PC hardware as well as a ROS node as demonstrated in the <a href="https://www.mathworks.com/help/vision/ug/build-and-deploy-visual-slam-algorithm-with-ros-in-matlab.html" data-docid="vision_ug#mw_13c763a3-acf0-49fc-85dc-b2cdf8c7dfad" class="a">Build and Deploy Visual SLAM Algorithm with ROS in MATLAB</a> example.</p></li></ul></div><p>This example shows the Modular and Modifiable implementation. For more details about the Performant and Deployable<strong class="emphasis bold"> </strong>implementation, see the <a href="https://www.mathworks.com/help/vision/ug/performant-and-deployable-monocular-visual-slam.html" data-docid="vision_ug#mw_0fecd517-7820-4d71-ad11-cfd167c29f4d" class="a">Performant and Deployable Monocular Visual SLAM</a> example.</p><p>To speed up computations, you can enable parallel computing from the<a href="https://www.mathworks.com/help/vision/gs/computer-vision-toolbox-preferences.html" data-docid="vision_gs#bugsb2y-1" class="a">Computer Vision Toolbox Preferences</a> dialog box. To open Computer Vision Toolbox™ preferences, on the <strong class="emphasis bold">Home</strong> tab, in the <strong class="emphasis bold">Environment</strong> section, click <strong class="emphasis bold">Preferences</strong>. Then select <strong class="emphasis bold">Computer Vision Toolbox. </strong></p><div class="procedure"><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-1">Glossary</h3><p>The following terms are frequently used in this example:</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">Key Frames:</strong> A subset of video frames that contain cues for localization and tracking. Two consecutive key frames usually involve sufficient visual change.</p></li><li><p><strong class="emphasis bold">Map Points: </strong>A list of 3-D points that represent the map of the environment reconstructed from the key frames.</p></li><li><p><strong class="emphasis bold">Covisibility Graph</strong>: A graph consisting of key frame as nodes. Two key frames are connected by an edge if they share common map points. The weight of an edge is the number of shared map points.</p></li><li><p><strong class="emphasis bold">Essential Graph:</strong> A subgraph of covisibility graph containing only edges with high weight, i.e. more shared map points.</p></li><li><p><strong class="emphasis bold">Place Recognition Database: </strong>A database used to recognize whether a place has been visited in the past. The database stores the visual word-to-image mapping based on the input bag of features. It is used to search for an image that is visually similar to a query image. </p></li></ul></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-2">Overview of ORB-SLAM<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_F51FA529" class="anchor_target"></span></h3><div class="informalfigure"><div id="d126e4020" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_01.png" height="252" width="880"></p></div></div><p>The ORB-SLAM pipeline includes:</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">Map Initialization</strong>: ORB-SLAM starts by initializing the map of 3-D points from two video frames. The 3-D points and relative camera pose are computed using triangulation based on 2-D ORB feature correspondences. </p></li><li><p><strong class="emphasis bold">Tracking</strong>: Once a map is initialized, for each new frame, the camera pose is estimated by matching features in the current frame to features in the last key frame. The estimated camera pose is refined by tracking the local map.</p></li><li><p><strong class="emphasis bold">Local Mapping</strong>: The current frame is used to create new 3-D map points if it is identified as a key frame. At this stage, bundle adjustment is used to minimize reprojection errors by adjusting the camera pose and 3-D points.  </p></li><li><p><strong class="emphasis bold">Loop Closure</strong>: Loops are detected for each key frame by comparing it against all previous key frames using the bag-of-features approach. Once a loop closure is detected, the pose graph is optimized to refine the camera poses of all the key frames.</p></li></ul></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-3">Download and Explore the Input Image Sequence<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_78AE0116" class="anchor_target"></span></h3><p>The data used in this example are from the <a href="https://cvg.cit.tum.de/data/datasets/rgbd-dataset" target="_blank">TUM RGB-D benchmark</a> <a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_AA8F9725" class="intrnllnk">[2]</a>. You can download the data to a temporary directory using a web browser or by running the following code:</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_00"><span class="icon-copy" id="copy_popover_00"></span> Get <span class="caret" id="copy_popover_00"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock00"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand00"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>baseDownloadURL = <span style="color:#A020F0">"https://cvg.cit.tum.de/rgbd/dataset/freiburg3/rgbd_dataset_freiburg3_long_office_household.tgz"</span>; 
dataFolder      = fullfile(tempdir, <span style="color:#A020F0">'tum_rgbd_dataset'</span>, filesep); 
options         = weboptions(Timeout=Inf);
tgzFileName     = [dataFolder, <span style="color:#A020F0">'fr3_office.tgz'</span>];
folderExists    = exist(dataFolder, <span style="color:#A020F0">"dir"</span>);

<span style="color:#228B22">% Create a folder in a temporary directory to save the downloaded file</span>
<span style="color:#0000FF">if</span> ~folderExists  
    mkdir(dataFolder); 
    disp(<span style="color:#A020F0">'Downloading fr3_office.tgz (1.38 GB). This download can take a few minutes.'</span>) 
    websave(tgzFileName, baseDownloadURL, options); 
    
    <span style="color:#228B22">% Extract contents of the downloaded file</span>
    disp(<span style="color:#A020F0">'Extracting fr3_office.tgz (1.38 GB) ...'</span>) 
    untar(tgzFileName, dataFolder); 
<span style="color:#0000FF">end</span></pre></div></div></div><p>Create an <a href="https://www.mathworks.com/help/matlab/ref/matlab.io.datastore.imagedatastore.html" data-docid="matlab_ref#butueui-1" class="a"><code class="olink">imageDatastore</code></a> object to inspect the RGB images.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_01"><span class="icon-copy" id="copy_popover_01"></span> Get <span class="caret" id="copy_popover_01"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock01"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand01"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>imageFolder   = [dataFolder,<span style="color:#A020F0">'rgbd_dataset_freiburg3_long_office_household/rgb/'</span>];
imds          = imageDatastore(imageFolder);

<span style="color:#228B22">% Inspect the first image</span>
currFrameIdx = 1;
currI = readimage(imds, currFrameIdx);
himage = imshow(currI);</pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-4"><strong class="emphasis bold">Map Initialization</strong><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_1E00C6CB" class="anchor_target"></span></h3><p>The ORB-SLAM pipeline starts by initializing the map that holds 3-D world points. This step is crucial and has a significant impact on the accuracy of final SLAM result. Initial ORB feature point correspondences are found using <a href="https://www.mathworks.com/help/vision/ref/matchfeatures.html" data-docid="vision_ref#bsvbhh1-1" class="a"><code class="olink">matchFeatures</code></a> between a pair of images. After the correspondences are found, two geometric transformation models are used to establish map initialization:</p><div class="itemizedlist"><ul><li><p><strong class="emphasis bold">Homography</strong>: If the scene is planar, a homography projective transformation is a better choice to describe feature point correspondences. </p></li><li><p><strong class="emphasis bold">Fundamental Matrix:</strong> If the scene is non-planar, a fundamental matrix must be used instead.</p></li></ul></div><p>The model that results in a smaller reprojection error is selected to estimate the relative rotation and translation between the two frames using <a href="https://www.mathworks.com/help/vision/ref/estrelpose.html" data-docid="vision_ref#mw_839e96cc-f499-4cbb-8c26-4df25c958dc9" class="a"><code class="olink">estrelpose</code></a>. Since the RGB images are taken by a monocular camera which does not provide the depth information, the relative translation can only be recovered up to a specific scale factor.    </p><p>Given the relative camera pose and the matched feature points in the two images, the 3-D locations of the matched points are determined using <a href="https://www.mathworks.com/help/vision/ref/triangulate.html" data-docid="vision_ref#buefm11-1" class="a"><code class="olink">triangulate</code></a> function. A triangulated map point is valid when it is located in the front of both cameras, when its reprojection error is low, and when the parallax of the two views of the point is sufficiently large.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_02"><span class="icon-copy" id="copy_popover_02"></span> Get <span class="caret" id="copy_popover_02"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock02"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand02"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Set random seed for reproducibility</span>
rng(0);

<span style="color:#228B22">% Create a cameraIntrinsics object to store the camera intrinsic parameters.</span>
<span style="color:#228B22">% The intrinsics for the dataset can be found at the following page:</span>
<span style="color:#228B22">% https://vision.in.tum.de/data/datasets/rgbd-dataset/file_formats</span>
<span style="color:#228B22">% Note that the images in the dataset are already undistorted, hence there</span>
<span style="color:#228B22">% is no need to specify the distortion coefficients.</span>
focalLength    = [535.4, 539.2];    <span style="color:#228B22">% in units of pixels</span>
principalPoint = [320.1, 247.6];    <span style="color:#228B22">% in units of pixels</span>
imageSize      = size(currI,[1 2]);  <span style="color:#228B22">% in units of pixels</span>
intrinsics     = cameraIntrinsics(focalLength, principalPoint, imageSize);

<span style="color:#228B22">% Detect and extract ORB features</span>
scaleFactor = 1.2;
numLevels   = 8;
numPoints   = 1000;
[preFeatures, prePoints] = helperDetectAndExtractFeatures(currI, scaleFactor, numLevels, numPoints); 

currFrameIdx = currFrameIdx + 1;
firstI       = currI; <span style="color:#228B22">% Preserve the first frame </span>

isMapInitialized  = false;

<span style="color:#228B22">% Map initialization loop</span>
<span style="color:#0000FF">while</span> ~isMapInitialized &amp;&amp; currFrameIdx &lt; numel(imds.Files)
    currI = readimage(imds, currFrameIdx);

    [currFeatures, currPoints] = helperDetectAndExtractFeatures(currI, scaleFactor, numLevels, numPoints); 

    currFrameIdx = currFrameIdx + 1;

    <span style="color:#228B22">% Find putative feature matches</span>
    indexPairs = matchFeatures(preFeatures, currFeatures, Unique=true, <span style="color:#0000FF">...</span>
        MaxRatio=0.9, MatchThreshold=40);

    <span style="color:#228B22">% If not enough matches are found, check the next frame</span>
    minMatches = 100;
    <span style="color:#0000FF">if</span> size(indexPairs, 1) &lt; minMatches
        <span style="color:#0000FF">continue</span>
    <span style="color:#0000FF">end</span>

    preMatchedPoints  = prePoints(indexPairs(:,1),:);
    currMatchedPoints = currPoints(indexPairs(:,2),:);

    <span style="color:#228B22">% Compute homography and evaluate reconstruction</span>
    [tformH, scoreH, inliersIdxH] = helperComputeHomography(preMatchedPoints, currMatchedPoints);

    <span style="color:#228B22">% Compute fundamental matrix and evaluate reconstruction</span>
    [tformF, scoreF, inliersIdxF] = helperComputeFundamentalMatrix(preMatchedPoints, currMatchedPoints, intrinsics);

    <span style="color:#228B22">% Select the model based on a heuristic</span>
    ratio = scoreH/(scoreH + scoreF);
    ratioThreshold = 0.45;
    <span style="color:#0000FF">if</span> ratio &gt; ratioThreshold
        inlierTformIdx = inliersIdxH;
        tform          = tformH;
    <span style="color:#0000FF">else</span>
        inlierTformIdx = inliersIdxF;
        tform          = tformF;
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Computes the camera location up to scale. Use half of the </span>
    <span style="color:#228B22">% points to reduce computation</span>
    inlierPrePoints  = preMatchedPoints(inlierTformIdx);
    inlierCurrPoints = currMatchedPoints(inlierTformIdx);
    [relPose, validFraction] = estrelpose(tform, intrinsics, <span style="color:#0000FF">...</span>
        inlierPrePoints(1:2:end), inlierCurrPoints(1:2:end));

    <span style="color:#228B22">% If not enough inliers are found, move to the next frame</span>
    <span style="color:#0000FF">if</span> validFraction &lt; 0.9 || numel(relPose)&gt;1
        <span style="color:#0000FF">continue</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Triangulate two views to obtain 3-D map points</span>
    minParallax = 1; <span style="color:#228B22">% In degrees</span>
    [isValid, xyzWorldPoints, inlierTriangulationIdx] = helperTriangulateTwoFrames(<span style="color:#0000FF">...</span>
        rigidtform3d, relPose, inlierPrePoints, inlierCurrPoints, intrinsics, minParallax);

    <span style="color:#0000FF">if</span> ~isValid
        <span style="color:#0000FF">continue</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Get the original index of features in the two key frames</span>
    indexPairs = indexPairs(inlierTformIdx(inlierTriangulationIdx),:);

    isMapInitialized = true;

    disp([<span style="color:#A020F0">'Map initialized with frame 1 and frame '</span>, num2str(currFrameIdx-1)])
<span style="color:#0000FF">end</span> <span style="color:#228B22">% End of map initialization loop</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Map initialized with frame 1 and frame 30
</pre></div></div></div><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_03"><span class="icon-copy" id="copy_popover_03"></span> Get <span class="caret" id="copy_popover_03"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock03"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand03"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">if</span> isMapInitialized
    close(himage.Parent.Parent); <span style="color:#228B22">% Close the previous figure</span>
    <span style="color:#228B22">% Show matched features</span>
    hfeature = showMatchedFeatures(firstI, currI, prePoints(indexPairs(:,1)), <span style="color:#0000FF">...</span>
        currPoints(indexPairs(:, 2)), <span style="color:#A020F0">"Montage"</span>);
<span style="color:#0000FF">else</span>
    error(<span style="color:#A020F0">'Unable to initialize the map.'</span>)
<span style="color:#0000FF">end</span></pre></div></div></div><div class="informalfigure"><div id="d126e4100" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_02.png" alt="Figure contains an axes object. The axes object contains 4 objects of type image, line. One or more of the lines displays its values using only markers" width="1107"></p></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-5">Store Initial Key Frames and Map Points<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_117F9C28" class="anchor_target"></span></h3><p>After the map is initialized using two frames, you can use <a href="https://www.mathworks.com/help/vision/ref/imageviewset.html" data-docid="vision_ref#mw_6e9e9e26-1c92-4289-a7d9-bccafaf79b78" class="a"><code class="olink">imageviewset</code></a><code class="literal"> </code>and <a href="https://www.mathworks.com/help/vision/ref/worldpointset.html" data-docid="vision_ref#mw_3d5c7b4a-5b50-436d-a8b0-f20fc3d7a466" class="a"><code class="olink">worldpointset</code></a> to store the two key frames and the corresponding map points:</p><div class="itemizedlist"><ul><li><p><a href="https://www.mathworks.com/help/vision/ref/imageviewset.html" data-docid="vision_ref#mw_6e9e9e26-1c92-4289-a7d9-bccafaf79b78" class="a"><code class="olink">imageviewset</code></a> stores the key frames and their attributes, such as ORB descriptors, feature points and camera poses, and connections between the key frames, such as feature points matches and relative camera poses. It also builds and updates a pose graph. The absolute camera poses and relative camera poses of odometry edges are stored as <a href="https://www.mathworks.com/help/images/ref/rigidtform3d.html" data-docid="images_ref#mw_ac5763d9-ceb0-44c0-85af-41d437cc74b4" class="a"><code class="olink">rigidtform3d</code></a> objects. The relative camera poses of loop-closure edges are stored as <a href="https://www.mathworks.com/help/images/ref/affinetform3d.html" data-docid="images_ref#mw_40291f8c-2edc-4b5f-90be-775bb40a8a9f" class="a"><code class="olink">affinetform3d</code></a> objects.</p></li><li><p><a href="https://www.mathworks.com/help/vision/ref/worldpointset.html" data-docid="vision_ref#mw_3d5c7b4a-5b50-436d-a8b0-f20fc3d7a466" class="a"><code class="olink">worldpointset</code></a> stores 3-D positions of the map points and the 3-D into 2-D projection correspondences: which map points are observed in a key frame and which key frames observe a map point. It also stores other attributes of map points, such as the mean view direction, the representative ORB descriptors, and the range of distance at which the map point can be observed.</p></li></ul></div><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_04"><span class="icon-copy" id="copy_popover_04"></span> Get <span class="caret" id="copy_popover_04"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock04"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand04"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Create an empty imageviewset object to store key frames</span>
vSetKeyFrames = imageviewset;

<span style="color:#228B22">% Create an empty worldpointset object to store 3-D map points</span>
mapPointSet   = worldpointset;

<span style="color:#228B22">% Add the first key frame. Place the camera associated with the first </span>
<span style="color:#228B22">% key frame at the origin, oriented along the Z-axis</span>
preViewId     = 1;
vSetKeyFrames = addView(vSetKeyFrames, preViewId, rigidtform3d, Points=prePoints,<span style="color:#0000FF">...</span>
    Features=preFeatures.Features);

<span style="color:#228B22">% Add the second key frame</span>
currViewId    = 2;
vSetKeyFrames = addView(vSetKeyFrames, currViewId, relPose, Points=currPoints,<span style="color:#0000FF">...</span>
    Features=currFeatures.Features);

<span style="color:#228B22">% Add connection between the first and the second key frame</span>
vSetKeyFrames = addConnection(vSetKeyFrames, preViewId, currViewId, relPose, Matches=indexPairs);

<span style="color:#228B22">% Add 3-D map points</span>
[mapPointSet, newPointIdx] = addWorldPoints(mapPointSet, xyzWorldPoints);

<span style="color:#228B22">% Add observations of the map points</span>
preLocations  = prePoints.Location;
currLocations = currPoints.Location;
preScales     = prePoints.Scale;
currScales    = currPoints.Scale;

<span style="color:#228B22">% Add image points corresponding to the map points in the first key frame</span>
mapPointSet   = addCorrespondences(mapPointSet, preViewId, newPointIdx, indexPairs(:,1));

<span style="color:#228B22">% Add image points corresponding to the map points in the second key frame</span>
mapPointSet   = addCorrespondences(mapPointSet, currViewId, newPointIdx, indexPairs(:,2));
</pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-6">Initialize Place Recognition Database</h3><p>Loop detection is performed using the bags-of-words approach.  A visual vocabulary represented as a <a href="https://www.mathworks.com/help/vision/ref/bagoffeatures.html" data-docid="vision_ref#bufbdd6" class="a"><code class="olink">bagOfFeatures</code></a> object is created offline with the ORB descriptors extracted from a large set of images in the dataset by calling:</p><p><code class="literal">bag = bagOfFeatures(imds,CustomExtractor=@helperORBFeatureExtractorFunction,TreeProperties=[3, 10],StrongestFeatures=1);</code></p><p>where <code class="literal">imds</code> is an <a href="https://www.mathworks.com/help/matlab/ref/matlab.io.datastore.imagedatastore.html" data-docid="matlab_ref#butueui-1" class="a"><code class="olink">imageDatastore</code></a> object storing the training images and <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperORBFeatureExtractorFunction.m&#39;)" target="_blank"><code class="literal">helperORBFeatureExtractorFunction</code></a><code class="literal"> </code>is the ORB feature extractor function. See <a href="https://www.mathworks.com/help/vision/ug/image-retrieval-with-bag-of-visual-words.html" data-docid="vision_ug#bun8icv-1" class="a">Image Retrieval with Bag of Visual Words</a> for more information. </p><p>The loop closure process incrementally builds a database, represented as an <a href="https://www.mathworks.com/help/vision/ref/invertedimageindex.html" data-docid="vision_ref#bumxjai-1" class="a"><code class="olink">invertedImageIndex</code></a> object, that stores the visual word-to-image mapping based on the bag of ORB features.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_05"><span class="icon-copy" id="copy_popover_05"></span> Get <span class="caret" id="copy_popover_05"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock05"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand05"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Load the bag of features data created offline</span>
bofData         = load(<span style="color:#A020F0">"bagOfFeaturesDataSLAM.mat"</span>);

<span style="color:#228B22">% Initialize the place recognition database</span>
loopDatabase    = invertedImageIndex(bofData.bof,SaveFeatureLocations=false);

<span style="color:#228B22">% Add features of the first two key frames to the database</span>
addImageFeatures(loopDatabase, preFeatures, preViewId);
addImageFeatures(loopDatabase, currFeatures, currViewId);</pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-7">Refine and Visualize the Initial Reconstruction<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_EBF51975" class="anchor_target"></span></h3><p>Refine the initial reconstruction using <a href="https://www.mathworks.com/help/vision/ref/bundleadjustment.html" data-docid="vision_ref#bu48f97-1" class="a"><code class="olink">bundleAdjustment</code></a>, that optimizes both camera poses and world points to minimize the overall reprojection errors. After the refinement, the attributes of the map points including 3-D locations, view direction, and depth range are updated. You can use <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualizeMotionAndStructure.m&#39;)" target="_blank"><code class="literal">helperVisualizeMotionAndStructure</code></a> to visualize the map points and the camera locations. </p><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_95689CBA" class="anchor_target"></span><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_06"><span class="icon-copy" id="copy_popover_06"></span> Get <span class="caret" id="copy_popover_06"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock06"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand06"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Run full bundle adjustment on the first two key frames</span>
tracks       = findTracks(vSetKeyFrames);
cameraPoses  = poses(vSetKeyFrames);

[refinedPoints, refinedAbsPoses] = bundleAdjustment(xyzWorldPoints, tracks, <span style="color:#0000FF">...</span>
    cameraPoses, intrinsics, FixedViewIDs=1, <span style="color:#0000FF">...</span>
    PointsUndistorted=true, AbsoluteTolerance=1e-7,<span style="color:#0000FF">...</span>
    RelativeTolerance=1e-15, MaxIteration=20, <span style="color:#0000FF">...</span>
    Solver=<span style="color:#A020F0">"preconditioned-conjugate-gradient"</span>);

<span style="color:#228B22">% Scale the map and the camera pose using the median depth of map points</span>
medianDepth   = median(vecnorm(refinedPoints.'));
refinedPoints = refinedPoints / medianDepth;

refinedAbsPoses.AbsolutePose(currViewId).Translation = <span style="color:#0000FF">...</span>
    refinedAbsPoses.AbsolutePose(currViewId).Translation / medianDepth;
relPose.Translation = relPose.Translation/medianDepth;

<span style="color:#228B22">% Update key frames with the refined poses</span>
vSetKeyFrames = updateView(vSetKeyFrames, refinedAbsPoses);
vSetKeyFrames = updateConnection(vSetKeyFrames, preViewId, currViewId, relPose);

<span style="color:#228B22">% Update map points with the refined positions</span>
mapPointSet = updateWorldPoints(mapPointSet, newPointIdx, refinedPoints);

<span style="color:#228B22">% Update view direction and depth </span>
mapPointSet = updateLimitsAndDirection(mapPointSet, newPointIdx, vSetKeyFrames.Views);

<span style="color:#228B22">% Update representative view</span>
mapPointSet = updateRepresentativeView(mapPointSet, newPointIdx, vSetKeyFrames.Views);

<span style="color:#228B22">% Visualize matched features in the current frame</span>
close(hfeature.Parent.Parent);
featurePlot   = helperVisualizeMatchedFeatures(currI, currPoints(indexPairs(:,2)));</pre></div></div></div><div class="informalfigure"><div id="d126e4171" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_03.png" alt="Figure contains an axes object. The axes object with title Matched Features in Current Frame contains 2 objects of type image, line. One or more of the lines displays its values using only markers" width="640"></p></div></div><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_07"><span class="icon-copy" id="copy_popover_07"></span> Get <span class="caret" id="copy_popover_07"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock07"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand07"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Visualize initial map points and camera trajectory</span>
mapPlot       = helperVisualizeMotionAndStructure(vSetKeyFrames, mapPointSet);

<span style="color:#228B22">% Show legend</span>
showLegend(mapPlot);</pre></div></div></div><div class="informalfigure"><div id="d126e4178" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_04.png" alt="Figure Point Cloud Player contains an axes object. The axes object with xlabel X, ylabel Y contains 12 objects of type line, text, patch, scatter. These objects represent Map points, Estimated trajectory." width="560"></p></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-8">Tracking<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_2EF6DD80" class="anchor_target"></span></h3><p>The tracking process is performed using every frame and determines when to insert a new key frame. To simplify this example, we will terminate the tracking process once a loop closure is found.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_08"><span class="icon-copy" id="copy_popover_08"></span> Get <span class="caret" id="copy_popover_08"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock08"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand08"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% ViewId of the current key frame</span>
currKeyFrameId   = currViewId;

<span style="color:#228B22">% ViewId of the last key frame</span>
lastKeyFrameId   = currViewId;

<span style="color:#228B22">% Index of the last key frame in the input image sequence</span>
lastKeyFrameIdx  = currFrameIdx - 1; 

<span style="color:#228B22">% Indices of all the key frames in the input image sequence</span>
addedFramesIdx   = [1; lastKeyFrameIdx];

isLoopClosed     = false;</pre></div></div></div><p>Each frame is processed as follows:</p><div class="orderedlist"><ol style="list-style: decimal;"><li><p>ORB features are extracted for each new frame and then matched (using <a href="https://www.mathworks.com/help/vision/ref/matchfeatures.html" data-docid="vision_ref#bsvbhh1-1" class="a"><code class="olink">matchFeatures</code></a>), with features in the last key frame that have known corresponding 3-D map points. </p></li><li><p>Estimate the camera pose with the Perspective-n-Point algorithm using <a href="https://www.mathworks.com/help/vision/ref/estworldpose.html" data-docid="vision_ref#mw_9685837b-561a-4e27-a7c5-0e1ac2d32fd8" class="a"><code class="olink">estworldpose</code></a>.</p></li><li><p>Given the camera pose, project the map points observed by the last key frame into the current frame and search for feature correspondences using  <a href="https://www.mathworks.com/help/vision/ref/matchfeaturesinradius.html" data-docid="vision_ref#mw_098d719d-da7d-45dd-81aa-ddab5fdfc9a4" class="a"><code class="olink">matchFeaturesInRadius</code></a>.<code class="literal"> </code></p></li><li><p>With 3-D to 2-D correspondence in the current frame, refine the camera pose by performing a motion-only bundle adjustment using <a href="https://www.mathworks.com/help/vision/ref/bundleadjustmentmotion.html" data-docid="vision_ref#mw_11887bed-7a1c-44d8-929a-e5401685ddcf" class="a"><code class="olink">bundleAdjustmentMotion</code></a>. </p></li><li><p>Project the local map points into the current frame to search for more feature correspondences using <a href="https://www.mathworks.com/help/vision/ref/matchfeaturesinradius.html" data-docid="vision_ref#mw_098d719d-da7d-45dd-81aa-ddab5fdfc9a4" class="a"><code class="olink">matchFeaturesInRadius</code></a> and refine the camera pose again using <a href="https://www.mathworks.com/help/vision/ref/bundleadjustmentmotion.html" data-docid="vision_ref#mw_11887bed-7a1c-44d8-929a-e5401685ddcf" class="a"><code class="olink">bundleAdjustmentMotion</code></a>. </p></li><li><p>The last step of tracking is to decide if the current frame is a new key frame. If the current frame is a key frame, continue to the <strong class="emphasis bold">Local Mapping </strong>process. Otherwise, start <strong class="emphasis bold">Tracking</strong> for the next frame. </p></li></ol></div><p>If tracking is lost because not enough number of feature points could be matched, try inserting new key frames more frequently.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_09"><span class="icon-copy" id="copy_popover_09"></span> Get <span class="caret" id="copy_popover_09"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock09"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand09"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Main loop</span>
isLastFrameKeyFrame = true;
<span style="color:#0000FF">while</span> ~isLoopClosed &amp;&amp; currFrameIdx &lt; numel(imds.Files)  
    currI = readimage(imds, currFrameIdx);

    [currFeatures, currPoints] = helperDetectAndExtractFeatures(currI, scaleFactor, numLevels, numPoints);

    <span style="color:#228B22">% Track the last key frame</span>
    <span style="color:#228B22">% mapPointsIdx:   Indices of the map points observed in the current frame</span>
    <span style="color:#228B22">% featureIdx:     Indices of the corresponding feature points in the </span>
    <span style="color:#228B22">%                 current frame</span>
    [currPose, mapPointsIdx, featureIdx] = helperTrackLastKeyFrame(mapPointSet, <span style="color:#0000FF">...</span>
        vSetKeyFrames.Views, currFeatures, currPoints, lastKeyFrameId, intrinsics, scaleFactor);

    <span style="color:#228B22">% Track the local map and check if the current frame is a key frame.</span>
    <span style="color:#228B22">% A frame is a key frame if both of the following conditions are satisfied:</span>
    <span style="color:#228B22">%</span>
    <span style="color:#228B22">% 1. At least 20 frames have passed since the last key frame or the</span>
    <span style="color:#228B22">%    current frame tracks fewer than 100 map points.</span>
    <span style="color:#228B22">% 2. The map points tracked by the current frame are fewer than 90% of</span>
    <span style="color:#228B22">%    points tracked by the reference key frame.</span>
    <span style="color:#228B22">%</span>
    <span style="color:#228B22">% Tracking performance is sensitive to the value of numPointsKeyFrame.  </span>
    <span style="color:#228B22">% If tracking is lost, try a larger value.</span>
    <span style="color:#228B22">%</span>
    <span style="color:#228B22">% localKeyFrameIds:   ViewId of the connected key frames of the current frame</span>
    numSkipFrames     = 20;
    numPointsKeyFrame = 90;
    [localKeyFrameIds, currPose, mapPointsIdx, featureIdx, isKeyFrame] = <span style="color:#0000FF">...</span>
        helperTrackLocalMap(mapPointSet, vSetKeyFrames, mapPointsIdx, <span style="color:#0000FF">...</span>
        featureIdx, currPose, currFeatures, currPoints, intrinsics, scaleFactor, <span style="color:#0000FF">...</span>
        isLastFrameKeyFrame, lastKeyFrameIdx, currFrameIdx, numSkipFrames, numPointsKeyFrame);

    <span style="color:#228B22">% Visualize matched features</span>
    updatePlot(featurePlot, currI, currPoints(featureIdx));

    <span style="color:#0000FF">if</span> ~isKeyFrame
        currFrameIdx        = currFrameIdx + 1;
        isLastFrameKeyFrame = false;
        <span style="color:#0000FF">continue</span>
    <span style="color:#0000FF">else</span>
        isLastFrameKeyFrame = true;
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Update current key frame ID</span>
    currKeyFrameId  = currKeyFrameId + 1;</pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-9">Local Mapping<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_2761B384" class="anchor_target"></span></h3><p>Local mapping is performed for every key frame. When a new key frame is determined, add it to the key frames and update the attributes of the map points observed by the new key frame. To ensure that <code class="literal">mapPointSet</code> contains as few outliers as possible, a valid map point must be observed in at least 3 key frames. </p><p>New map points are created by triangulating ORB feature points in the current key frame and its connected key frames. For each unmatched feature point in the current key frame, search for a match with other unmatched points in the connected key frames using <a href="https://www.mathworks.com/help/vision/ref/matchfeatures.html" data-docid="vision_ref#bsvbhh1-1" class="a"><code class="olink">matchFeatures</code></a>. The local bundle adjustment refines the pose of the current key frame, the poses of connected key frames, and all the map points observed in these key frames.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_010"><span class="icon-copy" id="copy_popover_010"></span> Get <span class="caret" id="copy_popover_010"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock010"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand010"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>    <span style="color:#228B22">% Add the new key frame </span>
    [mapPointSet, vSetKeyFrames] = helperAddNewKeyFrame(mapPointSet, vSetKeyFrames, <span style="color:#0000FF">...</span>
        currPose, currFeatures, currPoints, mapPointsIdx, featureIdx, localKeyFrameIds);

    <span style="color:#228B22">% Remove outlier map points that are observed in fewer than 3 key frames</span>
    outlierIdx    = setdiff(newPointIdx, mapPointsIdx);
    <span style="color:#0000FF">if</span> ~isempty(outlierIdx)
        mapPointSet   = removeWorldPoints(mapPointSet, outlierIdx);
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Create new map points by triangulation</span>
    minNumMatches = 10;
    minParallax   = 3;
    [mapPointSet, vSetKeyFrames, newPointIdx] = helperCreateNewMapPoints(mapPointSet, vSetKeyFrames, <span style="color:#0000FF">...</span>
        currKeyFrameId, intrinsics, scaleFactor, minNumMatches, minParallax);

    <span style="color:#228B22">% Local bundle adjustment</span>
    [refinedViews, dist] = connectedViews(vSetKeyFrames, currKeyFrameId, MaxDistance=2);
    refinedKeyFrameIds = refinedViews.ViewId;
    fixedViewIds = refinedKeyFrameIds(dist==2);
    fixedViewIds = fixedViewIds(1:min(10, numel(fixedViewIds)));

    <span style="color:#228B22">% Refine local key frames and map points</span>
    [mapPointSet, vSetKeyFrames, mapPointIdx] = bundleAdjustment(<span style="color:#0000FF">...</span>
        mapPointSet, vSetKeyFrames, [refinedKeyFrameIds; currKeyFrameId], intrinsics, <span style="color:#0000FF">...</span>
        FixedViewIDs=fixedViewIds, PointsUndistorted=true, AbsoluteTolerance=1e-7,<span style="color:#0000FF">...</span>
        RelativeTolerance=1e-16, Solver=<span style="color:#A020F0">"preconditioned-conjugate-gradient"</span>, <span style="color:#0000FF">...</span>
        MaxIteration=10);

    <span style="color:#228B22">% Update view direction and depth</span>
    mapPointSet = updateLimitsAndDirection(mapPointSet, mapPointIdx, vSetKeyFrames.Views);

    <span style="color:#228B22">% Update representative view</span>
    mapPointSet = updateRepresentativeView(mapPointSet, mapPointIdx, vSetKeyFrames.Views);

    <span style="color:#228B22">% Visualize 3D world points and camera trajectory</span>
    updatePlot(mapPlot, vSetKeyFrames, mapPointSet);</pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-10">Loop Closure<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_928303B2" class="anchor_target"></span></h3><p>The loop closure detection step takes the current key frame processed by the local mapping process and tries to detect and close the loop.  Loop candidates are identified by querying images in the database that are visually similar to the current key frame using <a href="https://www.mathworks.com/help/vision/ref/evaluateimageretrieval.html" data-docid="vision_ref#bumxi3p-1" class="a"><code class="olink">evaluateImageRetrieval</code></a>. A candidate key frame is valid if it is not connected to the last key frame and three of its neighbor key frames are loop candidates. </p><p>When a valid loop candidate is found, use <a href="https://www.mathworks.com/help/vision/ref/estgeotform3d.html" data-docid="vision_ref#mw_2e99afb0-9afd-4353-8f9e-9de2e40ee066" class="a"><code class="olink">estgeotform3d</code></a> to compute the relative pose between the loop candidate frame and the current key frame. The relative pose represents a 3-D similarity transformation stored in an <a href="https://www.mathworks.com/help/images/ref/affinetform3d.html" data-docid="images_ref#mw_40291f8c-2edc-4b5f-90be-775bb40a8a9f" class="a"><code class="olink">affinetform3d</code></a> object. Then add the loop connection with the relative pose and update <code class="literal">mapPointSet </code>and <code class="literal">vSetKeyFrames</code>.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_011"><span class="icon-copy" id="copy_popover_011"></span> Get <span class="caret" id="copy_popover_011"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock011"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand011"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>    <span style="color:#228B22">% Check loop closure after some key frames have been created    </span>
    <span style="color:#0000FF">if</span> currKeyFrameId &gt; 20

        <span style="color:#228B22">% Minimum number of feature matches of loop edges</span>
        loopEdgeNumMatches = 50;

        <span style="color:#228B22">% Detect possible loop closure key frame candidates</span>
        [isDetected, validLoopCandidates] = helperCheckLoopClosure(vSetKeyFrames, currKeyFrameId, <span style="color:#0000FF">...</span>
            loopDatabase, currI, loopEdgeNumMatches);

        <span style="color:#0000FF">if</span> isDetected 
            <span style="color:#228B22">% Add loop closure connections</span>
            [isLoopClosed, mapPointSet, vSetKeyFrames] = helperAddLoopConnections(<span style="color:#0000FF">...</span>
                mapPointSet, vSetKeyFrames, validLoopCandidates, currKeyFrameId, <span style="color:#0000FF">...</span>
                currFeatures, loopEdgeNumMatches);
        <span style="color:#0000FF">end</span>
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% If no loop closure is detected, add current features into the database</span>
    <span style="color:#0000FF">if</span> ~isLoopClosed
        addImageFeatures(loopDatabase,  currFeatures, currKeyFrameId);
    <span style="color:#0000FF">end</span>

    <span style="color:#228B22">% Update IDs and indices</span>
    lastKeyFrameId  = currKeyFrameId;
    lastKeyFrameIdx = currFrameIdx;
    addedFramesIdx  = [addedFramesIdx; currFrameIdx]; <span style="color:#228B22">%#ok&lt;AGROW&gt;</span>
    currFrameIdx    = currFrameIdx + 1;
<span style="color:#0000FF">end</span> <span style="color:#228B22">% End of main loop</span></pre></div></div></div><div class="informalfigure"><div id="d126e4266" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_05.png" alt="Figure contains an axes object. The axes object with title Matched Features in Current Frame contains 2 objects of type image, line. One or more of the lines displays its values using only markers" width="640"></p></div></div><div class="informalfigure"><div id="d126e4271" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_06.png" alt="Figure Point Cloud Player contains an axes object. The axes object with xlabel X, ylabel Y contains 12 objects of type line, text, patch, scatter. These objects represent Map points, Estimated trajectory." width="560"></p></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Loop edge added between keyframe: 6 and 120
</pre></div></div></div><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_7ABA3E26" class="anchor_target"></span><p>Finally, a similarity pose graph optimization is performed over the essential graph in <code class="literal">vSetKeyFrames </code>to correct the drift of camera poses. The essential graph is created internally by removing connections with fewer than <code class="literal">minNumMatches </code>matches in the covisibility graph. After similarity pose graph optimization, update the 3-D locations of the map points using the optimized poses and the associated scales.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_012"><span class="icon-copy" id="copy_popover_012"></span> Get <span class="caret" id="copy_popover_012"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock012"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand012"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">if</span> isLoopClosed
    <span style="color:#228B22">% Optimize the poses</span>
    minNumMatches      = 20;
    vSetKeyFramesOptim = optimizePoses(vSetKeyFrames, minNumMatches, Tolerance=1e-16);

    <span style="color:#228B22">% Update map points after optimizing the poses</span>
    mapPointSet = helperUpdateGlobalMap(mapPointSet, vSetKeyFrames, vSetKeyFramesOptim);

    updatePlot(mapPlot, vSetKeyFrames, mapPointSet);

    <span style="color:#228B22">% Plot the optimized camera trajectory</span>
    optimizedPoses  = poses(vSetKeyFramesOptim);
    plotOptimizedTrajectory(mapPlot, optimizedPoses)

    <span style="color:#228B22">% Update legend</span>
    showLegend(mapPlot);
<span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-11">Compare with the Ground Truth<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_4D4B5AAE" class="anchor_target"></span></h3><p>You can compare the optimized camera trajectory with the ground truth to evaluate the accuracy of ORB-SLAM. The downloaded data contains a <code class="literal">groundtruth.txt</code> file that stores the ground truth of camera pose of each frame. You can import the data using the <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperImportGroundTruth.m&#39;)" target="_blank"><code class="literal">helperImportGroundTruth</code></a><code class="literal"> </code>function:</p><p><code class="literal">gTruthFileName = [dataFolder,'rgbd_dataset_freiburg3_long_office_household/groundtruth.txt'];</code></p><p><code class="literal">gTruth = helperImportGroundTruth(gTruthFileName, imds);</code></p><p>In this example, the data has been saved in the form of a MAT-file. Once the ground truth is imported, you can calculate the root-mean-square-error (RMSE) of trajectory estimates. </p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_013"><span class="icon-copy" id="copy_popover_013"></span> Get <span class="caret" id="copy_popover_013"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock013"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand013"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Load ground truth </span>
gTruthData = load(<span style="color:#A020F0">"orbslamGroundTruth.mat"</span>);
gTruth     = gTruthData.gTruth;

<span style="color:#228B22">% Plot the actual camera trajectory </span>
plotActualTrajectory(mapPlot, gTruth(addedFramesIdx), optimizedPoses);

<span style="color:#228B22">% Show legend</span>
showLegend(mapPlot);</pre></div></div></div><div class="informalfigure"><div id="d126e4306" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_07.png" alt="Figure Point Cloud Player contains an axes object. The axes object with xlabel X, ylabel Y contains 4 objects of type scatter, line. These objects represent Map points, Estimated trajectory, Optimized trajectory, Actual trajectory." width="560"></p></div></div><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_014"><span class="icon-copy" id="copy_popover_014"></span> Get <span class="caret" id="copy_popover_014"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock014"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand014"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Evaluate tracking accuracy</span>
helperEstimateTrajectoryError(gTruth(addedFramesIdx), optimizedPoses);</pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Absolute RMSE for key frame trajectory (m): 0.13809
</pre></div></div></div><p>You can test the visual SLAM pipeline with a different dataset by tuning the following parameters:</p><div class="itemizedlist"><ul><li><p><code class="literal">numPoints</code>: For image resolution of 480x640 pixels set <code class="literal">numPoints</code> to be 1000. For higher resolutions, such as 720 × 1280, set it to 2000. Larger values require more time in feature extraction.</p></li><li><p><code class="literal">numSkipFrames</code>: For frame rate of 30fps, set <code class="literal">numSkipFrames</code> to be 20. For a slower frame rate, set it to be a smaller value. Increasing <code class="literal">numSkipFrames </code>improves the tracking speed, but may result in tracking lost when the camera motion is fast.</p></li></ul></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-12">Code Generation</h3><p>To meet the requirements of MATLAB Coder, the above code is restructured to the entry-point function <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualSLAMCodegen.m&#39;)" target="_blank"><code class="literal">helperVisualSLAMCodegen</code></a>. This function takes a cell array of images as an input and outputs 3-D <a href="https://www.mathworks.com/help/vision/ref/worldpointset.html" data-docid="vision_ref#mw_3d5c7b4a-5b50-436d-a8b0-f20fc3d7a466" class="a"><code class="olink">worldpointset</code></a>, estimated camera poses, and frame indices.</p><p>As code generation does not support the <a href="https://www.mathworks.com/help/matlab/ref/matlab.io.datastore.imagedatastore.html" data-docid="matlab_ref#butueui-1" class="a"><code class="olink">imageDatastore</code></a> object, read the images, convert them to grayscale, and store them in a cell array.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_015"><span class="icon-copy" id="copy_popover_015"></span> Get <span class="caret" id="copy_popover_015"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock015"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand015"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>imageArray = cell(1,numel(imds.Files));
<span style="color:#0000FF">for</span> i = 1:numel(imds.Files)
    imageArray{i} = im2gray(readimage(imds,i));
<span style="color:#0000FF">end</span></pre></div></div></div><p>Use the <a href="https://www.mathworks.com/help/coder/ug/adding-the-compilation-directive-codegen.html" data-docid="coder_ug#brdqzuf" class="a">Compilation Directive %#codegen</a><span role="cross_prod"> (MATLAB Coder)</span> function to compile the <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualSLAMCodegen.m&#39;)" target="_blank"><code class="literal">helperVisualSLAMCodegen</code></a> function into a MEX file. You can specify the <code class="literal remove_text_wrapping">-report</code> option to generate a compilation report that shows the original MATLAB code and the associated files created during code generation. You can also create a temporary directory where MATLAB Coder can store the generated files. Note that, by default, the generated MEX file has the same name as the original MATLAB function with "<code class="literal">_mex"</code> appended as a suffix: <code class="literal">helperVisualSLAMCodegen_mex</code>. Alternatively, you can use the <code class="literal remove_text_wrapping">-o</code> option to specify the name of the MEX file.</p><p>For code generation, you must pass <code class="literal">imageArray</code> as an input to the <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualSLAMCodegen.m&#39;)" target="_blank"><code class="literal">helperVisualSLAMCodegen</code></a> function.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_016"><span class="icon-copy" id="copy_popover_016"></span> Get <span class="caret" id="copy_popover_016"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock016"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand016"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>cpuConfig = coder.config(<span style="color:#A020F0">"mex"</span>);
cpuConfig.TargetLang = <span style="color:#A020F0">"C++"</span>;
codegen <span style="color:#A020F0">-config</span> <span style="color:#A020F0">cpuConfig</span> <span style="color:#A020F0">helperVisualSLAMCodegen</span> <span style="color:#A020F0">-args</span> <span style="color:#A020F0">{imageArray}</span></pre></div></div></div><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Code generation successful.
</pre></div></div></div><p>Process the image data using the MEX-file.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_017"><span class="icon-copy" id="copy_popover_017"></span> Get <span class="caret" id="copy_popover_017"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock017"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand017"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre>monoSlamOut = helperVisualSLAMCodegen_mex(imageArray);</pre></div></div></div><p>Plot the estimated trajectory and actual trajectory of the camera by specifying <code class="literal">monoSlamOut</code> as an input argument to the <a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualizeMonoSlam.m&#39;)" target="_blank"><code class="literal">helperVisualizeMonoSlam</code></a> helper function.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_018"><span class="icon-copy" id="copy_popover_018"></span> Get <span class="caret" id="copy_popover_018"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock018"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand018"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#228B22">% Visualize the results</span>
mapPlot = helperVisualizeMonoVisualSlam(monoSlamOut);</pre></div></div></div><div class="informalfigure"><div id="d126e4387" class="mediaobject"><p><img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/MonocularVisualSimultaneousLocalizationAndMappingExample_08.png" alt="Figure Point Cloud Player contains an axes object. The axes object with xlabel X, ylabel Y contains 4 objects of type scatter, line. These objects represent Map points, Estimated trajectory, Optimized trajectory, Actual trajectory." width="560"></p></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-13">Supporting Functions<span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_32069680" class="anchor_target"></span></h3><p>Short helper functions are included below. Larger function are included in separate files.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperAddLoopConnections.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperAddLoopConnections</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>add connections between the current keyframe and the valid loop candidate.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperAddNewKeyFrame.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperAddNewKeyFrame</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>add key frames to the key frame set.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperCheckLoopClosure.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperCheckLoopClosure</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>detect loop candidates key frames by retrieving visually similar images from the database.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperCreateNewMapPoints.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperCreateNewMapPoints</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>create new map points by triangulation.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperORBFeatureExtractorFunction.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperORBFeatureExtractorFunction</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>implements the ORB feature extraction used in bagOfFeatures.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperTrackLastKeyFrame.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperTrackLastKeyFrame</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>estimate the current camera pose by tracking the last key frame.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperTrackLocalMap.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperTrackLocalMap</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>refine the current camera pose by tracking the local map.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualizeMatchedFeatures.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperVisualizeMatchedFeatures</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>show the matched features in a frame.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperVisualizeMotionAndStructure.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperVisualizeMotionAndStructure</code></strong></a><strong class="emphasis bold"><code class="literal"> </code></strong>show map points and camera trajectory.</p><p><a href="matlab:openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;,&#39;supportingFile&#39;,&#39;helperImportGroundTruth.m&#39;)" target="_blank"><strong class="emphasis bold"><code class="literal">helperImportGroundTruth</code></strong></a> import camera pose ground truth from the downloaded data.</p><p><strong class="emphasis bold"><code class="literal">helperDetectAndExtractFeatures</code></strong> detect and extract and ORB features from the image.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_019"><span class="icon-copy" id="copy_popover_019"></span> Get <span class="caret" id="copy_popover_019"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock019"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand019"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> [features, validPoints] = helperDetectAndExtractFeatures(Irgb, <span style="color:#0000FF">...</span>
    scaleFactor, numLevels, numPoints, varargin)

<span style="color:#228B22">% In this example, the images are already undistorted. In a general</span>
<span style="color:#228B22">% workflow, uncomment the following code to undistort the images.</span>
<span style="color:#228B22">%</span>
<span style="color:#228B22">% if nargin &gt; 4</span>
<span style="color:#228B22">%     intrinsics = varargin{1};</span>
<span style="color:#228B22">% end</span>
<span style="color:#228B22">% Irgb  = undistortImage(Irgb, intrinsics);</span>

<span style="color:#228B22">% Detect ORB features</span>
Igray  = im2gray(Irgb);

points = detectORBFeatures(Igray, ScaleFactor=scaleFactor, NumLevels=numLevels);

<span style="color:#228B22">% Select a subset of features, uniformly distributed throughout the image</span>
points = selectUniform(points, numPoints, size(Igray, 1:2));

<span style="color:#228B22">% Extract features</span>
[features, validPoints] = extractFeatures(Igray, points);
<span style="color:#0000FF">end</span></pre></div></div></div><p><strong class="emphasis bold"><code class="literal">helperComputeHomography </code></strong>compute homography and evaluate reconstruction.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_020"><span class="icon-copy" id="copy_popover_020"></span> Get <span class="caret" id="copy_popover_020"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock020"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand020"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> [H, score, inliersIndex] = helperComputeHomography(matchedPoints1, matchedPoints2)

[H, inliersLogicalIndex] = estgeotform2d( <span style="color:#0000FF">...</span>
    matchedPoints1, matchedPoints2, <span style="color:#A020F0">"projective"</span>, <span style="color:#0000FF">...</span>
    MaxNumTrials=1e3, MaxDistance=4);

inlierPoints1 = matchedPoints1(inliersLogicalIndex);
inlierPoints2 = matchedPoints2(inliersLogicalIndex);

inliersIndex  = find(inliersLogicalIndex);

locations1 = inlierPoints1.Location;
locations2 = inlierPoints2.Location;
xy1In2     = transformPointsForward(H, locations1);
xy2In1     = transformPointsInverse(H, locations2);
error1in2  = sum((locations2 - xy1In2).^2, 2);
error2in1  = sum((locations1 - xy2In1).^2, 2);

outlierThreshold = 6;

score = sum(max(outlierThreshold-error1in2, 0)) + <span style="color:#0000FF">...</span>
    sum(max(outlierThreshold-error2in1, 0));
<span style="color:#0000FF">end</span></pre></div></div></div><p> <strong class="emphasis bold"><code class="literal">helperFundamentalMatrix </code></strong>compute fundamental matrix and evaluate reconstruction.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_021"><span class="icon-copy" id="copy_popover_021"></span> Get <span class="caret" id="copy_popover_021"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock021"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand021"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> [F, score, inliersIndex] = helperComputeFundamentalMatrix(matchedPoints1, matchedPoints2, intrinsics)

[E, inliersLogicalIndex] = estimateEssentialMatrix( <span style="color:#0000FF">...</span>
    matchedPoints1, matchedPoints2, intrinsics, MaxNumTrials=1e3, MaxDistance=4);

F = intrinsics.K'\ E /intrinsics.K;

inlierPoints1 = matchedPoints1(inliersLogicalIndex);
inlierPoints2 = matchedPoints2(inliersLogicalIndex);

inliersIndex  = find(inliersLogicalIndex);

locations1    = inlierPoints1.Location;
locations2    = inlierPoints2.Location;

<span style="color:#228B22">% Distance from points to epipolar line</span>
lineIn1   = epipolarLine(F', locations2);
error2in1 = (sum([locations1, ones(size(locations1, 1),1)].* lineIn1, 2)).^2 <span style="color:#0000FF">...</span>
    ./ sum(lineIn1(:,1:2).^2, 2);
lineIn2   = epipolarLine(F, locations1);
error1in2 = (sum([locations2, ones(size(locations2, 1),1)].* lineIn2, 2)).^2 <span style="color:#0000FF">...</span>
    ./ sum(lineIn2(:,1:2).^2, 2);

outlierThreshold = 4;

score = sum(max(outlierThreshold-error1in2, 0)) + <span style="color:#0000FF">...</span>
    sum(max(outlierThreshold-error2in1, 0));

<span style="color:#0000FF">end</span></pre></div></div></div><p><strong class="emphasis bold"><code class="literal">helperTriangulateTwoFrames </code></strong>triangulate two frames to initialize the map.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_022"><span class="icon-copy" id="copy_popover_022"></span> Get <span class="caret" id="copy_popover_022"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock022"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand022"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> [isValid, xyzPoints, inlierIdx] = helperTriangulateTwoFrames(<span style="color:#0000FF">...</span>
    pose1, pose2, matchedPoints1, matchedPoints2, intrinsics, minParallax)

camMatrix1 = cameraProjection(intrinsics, pose2extr(pose1));
camMatrix2 = cameraProjection(intrinsics, pose2extr(pose2));

[xyzPoints, reprojectionErrors, isInFront] = triangulate(matchedPoints1, <span style="color:#0000FF">...</span>
    matchedPoints2, camMatrix1, camMatrix2);

<span style="color:#228B22">% Filter points by view direction and reprojection error</span>
minReprojError = 1;
inlierIdx  = isInFront &amp; reprojectionErrors &lt; minReprojError;
xyzPoints  = xyzPoints(inlierIdx ,:);

<span style="color:#228B22">% A good two-view with significant parallax</span>
ray1       = xyzPoints - pose1.Translation;
ray2       = xyzPoints - pose2.Translation;
cosAngle   = sum(ray1 .* ray2, 2) ./ (vecnorm(ray1, 2, 2) .* vecnorm(ray2, 2, 2));

<span style="color:#228B22">% Check parallax</span>
isValid = all(cosAngle &lt; cosd(minParallax) &amp; cosAngle&gt;0);
<span style="color:#0000FF">end</span></pre></div></div></div><p><strong class="emphasis bold"><code class="literal">helperEstimateTrajectoryError</code></strong><code class="literal"> </code>calculate the tracking error.</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_023"><span class="icon-copy" id="copy_popover_023"></span> Get <span class="caret" id="copy_popover_023"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock023"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand023"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> rmse = helperEstimateTrajectoryError(gTruth, cameraPoses)
locations       = vertcat(cameraPoses.AbsolutePose.Translation);
gLocations      = vertcat(gTruth.Translation);
scale           = median(vecnorm(gLocations, 2, 2))/ median(vecnorm(locations, 2, 2));
scaledLocations = locations * scale;

rmse = sqrt(mean( sum((scaledLocations - gLocations).^2, 2) ));
disp([<span style="color:#A020F0">'Absolute RMSE for key frame trajectory (m): '</span>, num2str(rmse)]);
<span style="color:#0000FF">end</span></pre></div></div></div><p><strong class="emphasis bold"><code class="literal">helperUpdateGlobalMap</code></strong> update 3-D locations of map points after pose graph optimization</p><div class="code_responsive -has_code_copy"><div class="programlisting"><div class="codeinput"><div class="btn-group code_actions"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="copy_code_popover_target" id="copy_popover_024"><span class="icon-copy" id="copy_popover_024"></span> Get <span class="caret" id="copy_popover_024"></span></span></button><ul class="dropdown-menu dropdown-menu-right copy_code"><li class="copy_code_block"><button id="copyBlock024"><span class="icon-copy"></span> Copy Code Block</button></li><li role="separator" aria-hidden="true" class="divider"></li><li class="copy_code_openexample"><p><span class="icon-webinar"></span> Copy openExample Command<br><small>Paste command in MATLAB to download and open example files</small></p><div role="presentation" class="input-group"><input type="text" class="form-control" readonly="" value="openExample(&#39;vision/MonocularVisualSimultaneousLocalizationAndMappingExample&#39;)"><span class="input-group-btn"><button class="btn btn_color_blue" type="button" id="copyCommand024"><span class="icon-copy"><span class="sr-only">Copy</span></span></button></span></div></li></ul></div><pre><span style="color:#0000FF">function</span> mapPointSet = helperUpdateGlobalMap(<span style="color:#0000FF">...</span>
    mapPointSet, vSetKeyFrames, vSetKeyFramesOptim)
<span style="color:#228B22">%helperUpdateGlobalMap update map points after pose graph optimization</span>
posesOld     = vSetKeyFrames.Views.AbsolutePose;
posesNew     = vSetKeyFramesOptim.Views.AbsolutePose;
positionsOld = mapPointSet.WorldPoints;
positionsNew = positionsOld;
indices     = 1:mapPointSet.Count;

<span style="color:#228B22">% Update world location of each map point based on the new absolute pose of </span>
<span style="color:#228B22">% the corresponding major view</span>
<span style="color:#0000FF">for</span> i = indices
    majorViewIds = mapPointSet.RepresentativeViewId(i);
    poseNew = posesNew(majorViewIds).A;
    tform = affinetform3d(poseNew/posesOld(majorViewIds).A);
    positionsNew(i, :) = transformPointsForward(tform, positionsOld(i, :));
<span style="color:#0000FF">end</span>
mapPointSet = updateWorldPoints(mapPointSet, indices, positionsNew);
<span style="color:#0000FF">end</span></pre></div></div></div><h3 class="title" id="MonocularVisualSimultaneousLocalizationAndMappingExample-14"><strong class="emphasis bold">Reference</strong><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_H_4F6D5128" class="anchor_target"></span></h3><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_A54BE93B" class="anchor_target"></span><p>[1] Mur-Artal, Raul, Jose Maria Martinez Montiel, and Juan D. Tardos. "ORB-SLAM: a versatile and accurate monocular SLAM system." <span class="emphasis"><em>IEEE Transactions on Robotics</em></span> 31, no. 5, pp 1147-116, 2015.</p><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_AA8F9725" class="anchor_target"></span><p>[2] Sturm, Jürgen, Nikolas Engelhard, Felix Endres, Wolfram Burgard, and Daniel Cremers. "A benchmark for the evaluation of RGB-D SLAM systems". In <span class="emphasis"><em>Proceedings of IEEE/RSJ International Conference on Intelligent Robots and Systems</em></span>, pp. 573-580, 2012.</p><span id="mw_rtc_MonocularVisualSimultaneousLocalizationAndMappingExample_M_38C015F9" class="anchor_target"></span><p>[3] Kümmerle, Rainer, Giorgio Grisetti, Hauke Strasdat, Kurt Konolige, and Wolfram Burgard. "g 2 o: A general framework for graph optimization." In <span class="emphasis"><em>Proceedings of IEEE International Conference on Robotics and Automation</em></span>, pp. 3607-3613, 2011.</p></div>
      <h2 id="d126e4527">Related Topics</h2><ul><li><a href="https://www.mathworks.com/help/vision/ug/stereo-visual-simultaneous-localization-mapping.html" class="a">Stereo Visual Simultaneous Localization and Mapping</a></li></ul>
    </section>
    </div></section><div xmlns="http://www.w3.org/1999/xhtml" class="clearfix"></div>
<div xmlns="http://www.w3.org/1999/xhtml" align="center" class="feedbackblock" id="mw_docsurvey" style=""><script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/docfeedback.js.download"></script>
<script>loadSurveyHidden();</script><div><mw-rating-feedback id="declarative" forwardlabel="Submit" forwardlabelaria="Submit" step="0"><mw-rating-feedback-step step="0"><!----></mw-rating-feedback-step><mw-rating-feedback-step step="1"><!----></mw-rating-feedback-step><mw-rating-feedback-step step="2"><!----></mw-rating-feedback-step><!----><!--?lit$087524657$--><!---->
            <div role="alert" class="mwRatingFeedback-Hidden" aria-hidden="true" hidden="">
                <div><!--?lit$087524657$--><span class="glyphicon glyphicon-ok" style="display: inline-block !important; color: #008013"></span>Thank you for your feedback!</div>
            </div><!----><!---->
            <div class="mwRatingFeedback-Hidden" aria-hidden="true">
                <label class="mwRatingFeedback-Label" for="mw_rating_feedback_2"><!--?lit$087524657$-->Why did you choose this rating?</label>
                <textarea spellcheck="" disabled="" id="mw_rating_feedback_2" class="mwRatingFeedback-Value" name="mw_rating_feedback_2__comment"></textarea>
                <!--?lit$087524657$--><button disabled="" class="mwRatingFeedback-NextButton" aria-label="Submit"><!--?lit$087524657$-->Submit</button>
            </div><!----><!---->
            <div class="" aria-hidden="false">
                <label class="mwRatingFeedback-Label" id="mw_rating_feedback_1"><!--?lit$087524657$-->How useful was this information?</label>
                <mw-rating aria-labelledby="mw_rating_feedback_1" class="mwRatingFeedback-Value" name="mw_rating_feedback_1__rating" value="" role="radiogroup" aria-valuenow="" aria-disabled="false" aria-readonly="false">
                <!----><div class="mwRatingLayout"><div class="mwRatingContainer mwRatingHoverOverride"><!--?lit$087524657$--><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_0" value=""><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_0">
             <!--?lit$087524657$--><!--?--><span><!--?lit$087524657$-->Unrated</span>
             </label><!----><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_1" value="1"><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_1">
             <!--?lit$087524657$--><svg aria-hidden="true" focusable="false"><use href="#mw_rating_staricon"></use></svg><span><!--?lit$087524657$-->1 star</span>
             </label><!----><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_2" value="2"><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_2">
             <!--?lit$087524657$--><svg aria-hidden="true" focusable="false"><use href="#mw_rating_staricon"></use></svg><span><!--?lit$087524657$-->2 stars</span>
             </label><!----><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_3" value="3"><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_3">
             <!--?lit$087524657$--><svg aria-hidden="true" focusable="false"><use href="#mw_rating_staricon"></use></svg><span><!--?lit$087524657$-->3 stars</span>
             </label><!----><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_4" value="4"><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_4">
             <!--?lit$087524657$--><svg aria-hidden="true" focusable="false"><use href="#mw_rating_staricon"></use></svg><span><!--?lit$087524657$-->4 stars</span>
             </label><!----><!----><input type="radio" class="mwRatingInput" name="mw_rating_feedback_1__rating" id="mw_rating_feedback_1__rating_5" value="5"><label class="mwRatingLabel" tabindex="-1" for="mw_rating_feedback_1__rating_5">
             <!--?lit$087524657$--><svg aria-hidden="true" focusable="false"><use href="#mw_rating_staricon"></use></svg><span><!--?lit$087524657$-->5 stars</span>
             </label><!----></div><!--?lit$087524657$--></div></mw-rating>
            </div><!----><!--?--></mw-rating-feedback></div>
<link rel="stylesheet" href="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/index-css(1).css" type="text/css">
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/bundle.index(1).js.download"></script>

<script>initDocSurvey();</script></div>
<div class="modal fade" id="matlab-command-dialog" tabindex="-1" role="dialog" aria-labelledby="matlabCommandDialogLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <h2 class="modal-title">MATLAB Command</h2>
      </div>
      <div class="modal-body" id="dialog-body">
        <p>You clicked a link that corresponds to this MATLAB command: </p>
        <pre id="dialog-matlab-command"></pre>
        <p>Run the command by entering it in the MATLAB Command Window.
        Web browsers do not support MATLAB commands.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn_secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

  

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 


<div id="location_content" style="display:none;"></div>


<div class="modal fade" id="country-unselected" tabindex="-1" role="dialog" aria-labelledby="country-unselected-title" translate="no">
<div id="country-select-container">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <img alt="MathWorks" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/pic-header-mathworks-logo2.svg" style="width:167px; height:auto;">
      </div>
      <div class="modal-body">
        <div class="row add_margin_40">
          <div class="col-xs-12">
            <p class="h1 icon-globe icon_color_secondary" id="country-unselected-title">Select a Web Site</p>
            <p>Choose a web site to get translated content where available and see local events and offers. Based on your location, we recommend that you select: <strong class="recommended-country">United States</strong>.</p>
						<div class="default-recommendation">
							<a href="https://www.mathworks.com/" id="recommended_domain_button" class="btn btn_color_blue containsResourceName resourceClass-button" data-lang="en"><span class="recommended-country">United States</span></a>
						</div>
						<div class="ch-recommendation" style="display:none;">
							<ul class="list-inline">
								<li class="add_display_block_xs add_margin_10_xs"><a href="https://ch.mathworks.com/" class="recommendation-button btn btn_color_blue btn-md add_display_block_xs" data-subdomain="ch" data-lang="en" data-recommended-text="Switzerland" data-default-lang="true" data-do-not-rewrite="true" x-cq-linkchecker="skip">Switzerland (English)</a></li>
								<li class="add_display_block_xs add_margin_10_xs"><a href="https://ch.mathworks.com/" class="recommendation-button btn companion_btn btn-md add_display_block_xs" data-subdomain="ch" data-lang="de" data-recommended-text="Schweiz" data-do-not-rewrite="true" x-cq-linkchecker="skip">Switzerland (Deutsch)</a></li>
								<li class="add_display_block_xs"><a href="https://ch.mathworks.com/" class="recommendation-button btn companion_btn btn-md add_display_block_xs" data-subdomain="ch" data-lang="fr" data-recommended-text="Suisse" data-do-not-rewrite="true" x-cq-linkchecker="skip">Switzerland (Français)</a></li>
							</ul>
						</div>
						<div class="zh-recommendation" style="display:none;">
							<ul class="list-inline">
								<li class="add_display_block_xs add_margin_10_xs"><a href="https://ww2.mathworks.cn/" class="recommendation-button btn btn_color_blue btn-md add_display_block_xs" data-subdomain="ww2" data-lang="zh" data-recommended-text="中国" data-default-lang="true" data-do-not-rewrite="true" x-cq-linkchecker="skip">中国 (简体中文)</a></li>
								<li class="add_display_block_xs"><a href="https://ww2.mathworks.cn/" class="recommendation-button btn companion_btn btn-md add_display_block_xs" data-subdomain="ww2" data-lang="en" data-recommended-text="China" data-do-not-rewrite="true" x-cq-linkchecker="skip">中国 (English)</a></li>
							</ul>
						</div>
          </div>
        </div>
        <p>You can also select a web site from the following list:</p>
				<div class="alert alert-warning" id="china_performance_alert" style="display:none;"> <span class="alert_icon icon-alert-warning"></span>
					<h2>How to Get Best Site Performance</h2>
					<p>Select the China site (in Chinese or English) for best site performance. Other MathWorks country sites are not optimized for visits from your location.</p>
				</div>
        <div class="row add_margin_30">
          <div class="col-sm-4 col-md-3">
            <h3 class="add_bottom_rule">Americas</h3>
            <ul class="list-unstyled">
              <li><a href="https://la.mathworks.com/" class="domain_selector_link" data-country-code="LA" data-subdomain="la" data-lang="es" data-default-lang="true" data-selected-text="América Latina" data-recommended-text="América Latina" data-do-not-rewrite="true">América Latina</a> (Español)</li>
              <li><a href="https://www.mathworks.com/" class="domain_selector_link" data-country-code="CA" data-subdomain="www" data-lang="en" data-do-not-rewrite="true">Canada</a> (English)</li>
              <li><a href="https://www.mathworks.com/" class="domain_selector_link" data-country-code="US" data-subdomain="www" data-lang="en" data-default-lang="true" data-selected-text="United States" data-recommended-text="United States" data-do-not-rewrite="true">United States</a> (English)</li>
            </ul>
          </div>
          <div class="col-sm-4 col-md-6">
            <h3 class="add_bottom_rule">Europe</h3>
            <div class="row">
              <div class="col-xs-6 col-sm-12 col-md-6">
                <ul class="list-unstyled add_margin_0_sm">
                  <li><a href="https://nl.mathworks.com/" class="domain_selector_link" data-country-code="BE" data-subdomain="nl" data-lang="en" data-do-not-rewrite="true">Belgium</a> (English)</li>
                  <li><a href="https://se.mathworks.com/" class="domain_selector_link" data-country-code="DK" data-subdomain="se" data-lang="en" data-do-not-rewrite="true">Denmark</a> (English)</li>
                  <li><a href="https://de.mathworks.com/" class="domain_selector_link" data-country-code="DE" data-subdomain="de" data-lang="de" data-default-lang="true" data-selected-text="Deutschland" data-recommended-text="Deutschland" data-do-not-rewrite="true">Deutschland</a> (Deutsch)</li>
                  <li><a href="https://es.mathworks.com/" class="domain_selector_link" data-country-code="ES" data-subdomain="es" data-lang="es" data-default-lang="true" data-selected-text="España" data-recommended-text="España" data-do-not-rewrite="true">España</a> (Español)</li>
                  <li><a href="https://se.mathworks.com/" class="domain_selector_link" data-country-code="FI" data-subdomain="se" data-lang="en" data-do-not-rewrite="true">Finland</a> (English)</li>
                  <li><a href="https://fr.mathworks.com/" class="domain_selector_link" data-country-code="FR" data-subdomain="fr" data-lang="fr" data-default-lang="true" data-selected-text="France" data-recommended-text="France" data-do-not-rewrite="true">France</a> (Français)</li>
                  <li><a href="https://uk.mathworks.com/" class="domain_selector_link" data-country-code="IE" data-subdomain="uk" data-lang="en" data-do-not-rewrite="true">Ireland</a> (English)</li>
                  <li><a href="https://it.mathworks.com/" class="domain_selector_link" data-country-code="IT" data-subdomain="it" data-lang="it" data-default-lang="true" data-selected-text="Italia" data-recommended-text="Italia" data-do-not-rewrite="true">Italia</a> (Italiano)</li>
                  <li><a href="https://nl.mathworks.com/" class="domain_selector_link" data-country-code="LU" data-subdomain="nl" data-lang="en" data-do-not-rewrite="true">Luxembourg</a> (English)</li>
                </ul>
              </div>
              <div class="col-xs-6 col-sm-12 col-md-6">
                <ul class="list-unstyled">
                  <li><a href="https://nl.mathworks.com/" class="domain_selector_link" data-country-code="NL" data-subdomain="nl" data-lang="en" data-default-lang="true" data-selected-text="Benelux" data-recommended-text="Netherlands" data-do-not-rewrite="true">Netherlands</a> (English)</li>
                  <li><a href="https://se.mathworks.com/" class="domain_selector_link" data-country-code="NO" data-subdomain="se" data-lang="en" data-do-not-rewrite="true">Norway</a> (English)</li>
                  <li><a href="https://de.mathworks.com/" class="domain_selector_link" data-country-code="AT" data-subdomain="de" data-lang="de" data-do-not-rewrite="true">Österreich</a> (Deutsch)</li>
                  <li><a href="https://www.mathworks.com/" class="domain_selector_link" data-country-code="PT" data-subdomain="www" data-lang="en" data-do-not-rewrite="true">Portugal</a> (English)</li>
                  <li><a href="https://se.mathworks.com/" class="domain_selector_link" data-country-code="Sweden" data-subdomain="se" data-lang="en" data-default-lang="true" data-selected-text="Nordic" data-recommended-text="Sweden" data-do-not-rewrite="true">Sweden</a> (English)</li>
                  <li>Switzerland
                    <ul class="list-unstyled add_indent_20">
                      <li><a href="https://ch.mathworks.com/" class="domain_selector_link" data-country-code="CH" data-subdomain="ch" data-lang="de" data-selected-text="Schweiz" data-recommended-text="Schweiz" data-do-not-rewrite="true">Deutsch</a></li>
                      <li><a href="https://ch.mathworks.com/" id="swiss_english" class="domain_selector_link" data-country-code="CH" data-subdomain="ch" data-lang="en" data-default-lang="true" data-selected-text="Switzerland" data-recommended-text="Switzerland" data-do-not-rewrite="true">English</a></li>
                      <li><a href="https://ch.mathworks.com/" class="domain_selector_link" data-country-code="CH" data-subdomain="ch" data-lang="fr" data-selected-text="Suisse" data-recommended-text="Suisse" data-do-not-rewrite="true">Français</a></li>
                    </ul>
                  </li>
                  <li><a href="https://uk.mathworks.com/" class="domain_selector_link" data-country-code="GB" data-subdomain="uk" data-lang="en" data-default-lang="true" data-selected-text="United Kingdom" data-recommended-text="United Kingdom" data-do-not-rewrite="true">United Kingdom</a> (English)</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-sm-4 col-md-3">
            <h3 class="add_bottom_rule">Asia Pacific</h3>
            <ul class="list-unstyled">
              <li><a href="https://au.mathworks.com/" class="domain_selector_link" data-country-code="AU" data-subdomain="au" data-lang="en" data-default-lang="true" data-selected-text="Australia" data-recommended-text="Australia" data-do-not-rewrite="true">Australia</a> (English)</li>
              <li><a href="https://in.mathworks.com/" class="domain_selector_link" data-country-code="IN" data-subdomain="in" data-lang="en" data-default-lang="true" data-selected-text="India" data-recommended-text="India" data-do-not-rewrite="true">India</a> (English)</li>
              <li><a href="https://au.mathworks.com/" class="domain_selector_link" data-country-code="NZ" data-subdomain="au" data-lang="en" data-do-not-rewrite="true">New Zealand</a> (English)</li>
              <li>中国
                    <ul class="list-unstyled add_indent_20">
                      <li><a href="https://ww2.mathworks.cn/" class="domain_selector_link" data-country-code="CN" data-subdomain="ww2" data-lang="zh" data-default-lang="true" data-selected-text="中国" data-recommended-text="中国" data-do-not-rewrite="true">简体中文</a></li>
                      <li><a href="https://ww2.mathworks.cn/" class="domain_selector_link" data-country-code="CN" data-subdomain="ww2" data-lang="en" data-default-lang="true" data-selected-text="China" data-recommended-text="China" data-do-not-rewrite="true">English</a></li>
                    </ul>
               </li>
              <li><a href="https://jp.mathworks.com/" class="domain_selector_link" data-country-code="JP" data-subdomain="jp" data-lang="ja" data-default-lang="true" data-selected-text="日本" data-recommended-text="日本" data-do-not-rewrite="true">日本</a> (日本語)</li>
              <li><a href="https://kr.mathworks.com/" class="domain_selector_link" data-country-code="KR" data-subdomain="kr" data-lang="ko" data-default-lang="true" data-selected-text="한국" data-recommended-text="한국" data-do-not-rewrite="true">한국</a> (한국어)</li>
            </ul>
          </div>
        </div>
        <p class="text-center"><a href="https://www.mathworks.com/" class="worldwide_link">Contact your local office</a></p>
      </div>
    </div>
  </div>
  </div>
</div>
  

              </main>
            </div>
          </div>
        </div>
      </div>

      <!-- MOBILE CTA - Begin -->
      <div class="cta_container_mobile visible-sm visible-xs" style="width: auto;">
        <div class="container-fluid">      
          <div class="row">
            <div class="col-xs-12">
              <div class="cta_box">
<ul class="list-inline">
<li class="cta_item cta_item_general hidden-sm hidden-xs "><a href="https://www.mathworks.com/campaigns/products/trials.html?prodcode=VP&amp;s_tid=doc_trial_VP_tb" class="icon-download">Trial Software</a></li>
<li class="hidden-lg hidden-md "><a href="https://www.mathworks.com/campaigns/products/trials.html?prodcode=VP&amp;s_tid=doc_trial_VP_tb" class="btn btn_color_blue btn-block"><span class="icon-download"></span> Trial Software</a></li>
<li class="cta_item cta_item_general hidden-sm hidden-xs "><a href="https://www.mathworks.com/support/web_downloads_bounce.html?s_tid=hc_prod_update&amp;s_cid=1008_degr_docdn_270055" class="icon-download">Product Updates</a></li>
<li class="hidden-lg hidden-md "><a href="https://www.mathworks.com/support/web_downloads_bounce.html?s_tid=hc_prod_update&amp;s_cid=1008_degr_docdn_270055" class="btn btn_color_blue btn-block"><span class="icon-download"></span> Product Updates</a></li>
</ul>
</div> 
            </div>
          </div>
        </div>
      </div>
      <!-- MOBILE CTA - End -->


      <footer id="footer" class="bs-footer" style="width: auto;">
        <div class="container-fluid">
         <div class="footer" translate="no">
<div class="row">
<div class="col-xs-12 col-md-9">
<ul class="countrynav" id="countrynav">
<li class="footernav_country">
<a href="https://www.mathworks.com/help/vision/ug/monocular-visual-simultaneous-localization-and-mapping.html#" data-toggle="modal" data-target="#country-unselected">
<span class="icon-globe icon_color_quinary icon_16"></span>United States
</a>
</li>
</ul>
<div class="clearfix"></div>
<ul class="footernav">
<li class="footernav_patents"><a href="https://www.mathworks.com/company/aboutus/policies_statements/trust-center.html?s_tid=gf_tc">Trust Center</a></li>
<li class="footernav_trademarks"><a href="https://www.mathworks.com/company/aboutus/policies_statements/trademarks.html?s_tid=gf_trd">Trademarks</a></li>
<li class="footernav_privacy"><a href="https://www.mathworks.com/company/aboutus/policies_statements.html?s_tid=gf_priv">Privacy Policy</a></li>
<li class="footernav_piracy"><a href="https://www.mathworks.com/company/aboutus/policies_statements/piracy.html?s_tid=gf_pir">Preventing Piracy</a></li>
<li class="footernav_status"><a href="https://status.mathworks.com/?s_tid=gf_application">Application Status</a></li>
</ul>
<div class="clearfix"></div>
<div class="clearfix"></div>
<p class="copyright" translate="no">© 1994-2024 The MathWorks, Inc.</p>
</div>
<div class="clearfix visible-sm add_margin_10"></div>
<div class="col-xs-12 col-md-3">
<div class="social_media">
<ul class="social_media_icons">
<li>
<a href="https://www.facebook.com/MATLAB" target="_blank" rel="nofollow noopener noreferrer" class="svg_link">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-facebook.svg" alt="Facebook" class="ico_facebook">
</a>
</li>
<li>
<a href="https://twitter.com/MATLAB" target="_blank" rel="nofollow noopener noreferrer" class="svg_link">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-x.svg" alt="X" class="ico_twitter">
</a>
</li>
<li>
<a href="https://www.instagram.com/matlab/" class="svg_link" target="_blank" rel="nofollow noopener noreferrer">
<img class="ico_instagram" alt="Instagram" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-instagram.svg">
</a>
</li>
<li>
<a href="https://www.youtube.com/user/MATLAB" class="svg_link" target="_blank" rel="nofollow noopener noreferrer">
<img class="ico_youtube" alt="YouTube" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-youtube.svg">
</a>
</li>
<li>
<a href="https://www.linkedin.com/company/the-mathworks_2" target="_blank" rel="nofollow noopener noreferrer" class="svg_link">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-linkedin.svg" alt="LinkedIn" class="ico_linkedin">
</a>
</li>
<li>
<a href="https://www.mathworks.com/company/rss.html" class="svg_link">
<img src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/ico-rss.svg" alt="RSS" class="ico_rss">
</a>
</li>
</ul>
<div class="clearfix"></div>
<p><em>Join the conversation</em></p>
</div>
</div>
</div>
</div>
        </div>
      </footer>

    </div>
  
  </div><div style="display: none;"><!----><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">
    <symbol viewBox="-1 -1 18 18" id="mw_rating_staricon">
    <path d="M5 6h-5l4 4-1 6 5-4 5 4-1-6 4-4h-5l-3-6z"></path>
    </symbol>
    </svg></div>


<!-- CRUX 2.0 -->
<script src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/crux_nav_truncate.js.download"></script>

<!-- Mirror Search Queries on Scope Change : g2611494 -->
<script>
$('#search_scope_support').on('show.bs.collapse', function () {
  if ($('#search_scope_site #query').val()) {
    var site_search_value = $('#search_scope_site #query').val();
    $('#search_scope_support #docsearch').val(site_search_value); 
  }
})
$('#search_scope_site').on('show.bs.collapse', function () {
  if ($('#search_scope_support #docsearch').val()) {
    var support_search_value = $('#search_scope_support #docsearch').val();
    $('#search_scope_site #query').val(support_search_value); 
  }  
})
</script>
<script type="text/javascript" nonce="" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/LF8"></script>
<script>
(function() {
  var host = 'mathworks.com';
  var element = document.createElement('script');
  var firstScript = document.getElementsByTagName('script')[0];
  var url = 'https://cmp.inmobi.com'
    .concat('/choice/', 'zfNtLVVEHXE-1', '/', host, '/choice.js?tag_version=V3');
  var uspTries = 0;
  var uspTriesLimit = 3;
  element.async = true;
  element.type = 'text/javascript';
  element.src = url;

  firstScript.parentNode.insertBefore(element, firstScript);

  function makeStub() {
    var TCF_LOCATOR_NAME = '__tcfapiLocator';
    var queue = [];
    var win = window;
    var cmpFrame;

    function addFrame() {
      var doc = win.document;
      var otherCMP = !!(win.frames[TCF_LOCATOR_NAME]);

      if (!otherCMP) {
        if (doc.body) {
          var iframe = doc.createElement('iframe');

          iframe.style.cssText = 'display:none';
          iframe.name = TCF_LOCATOR_NAME;
          doc.body.appendChild(iframe);
        } else {
          setTimeout(addFrame, 5);
        }
      }
      return !otherCMP;
    }

    function tcfAPIHandler() {
      var gdprApplies;
      var args = arguments;

      if (!args.length) {
        return queue;
      } else if (args[0] === 'setGdprApplies') {
        if (
          args.length > 3 &&
          args[2] === 2 &&
          typeof args[3] === 'boolean'
        ) {
          gdprApplies = args[3];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        }
      } else if (args[0] === 'ping') {
        var retr = {
          gdprApplies: gdprApplies,
          cmpLoaded: false,
          cmpStatus: 'stub'
        };

        if (typeof args[2] === 'function') {
          args[2](retr);
        }
      } else {
        if(args[0] === 'init' && typeof args[3] === 'object') {
          args[3] = Object.assign(args[3], { tag_version: 'V2' });
        }
        queue.push(args);
      }
    }

    function postMessageEventHandler(event) {
      var msgIsString = typeof event.data === 'string';
      var json = {};

      try {
        if (msgIsString) {
          json = JSON.parse(event.data);
        } else {
          json = event.data;
        }
      } catch (ignore) {}

      var payload = json.__tcfapiCall;

      if (payload) {
        window.__tcfapi(
          payload.command,
          payload.version,
          function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            if (event && event.source && event.source.postMessage) {
              event.source.postMessage(returnMsg, '*');
            }
          },
          payload.parameter
        );
      }
    }

    while (win) {
      try {
        if (win.frames[TCF_LOCATOR_NAME]) {
          cmpFrame = win;
          break;
        }
      } catch (ignore) {}

      if (win === window.top) {
        break;
      }
      win = win.parent;
    }
    if (!cmpFrame) {
      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    }
  }

  makeStub();

  var uspStubFunction = function() {
    var arg = arguments;
    if (typeof window.__uspapi !== uspStubFunction) {
      setTimeout(function() {
        if (typeof window.__uspapi !== 'undefined') {
          window.__uspapi.apply(window.__uspapi, arg);
        }
      }, 500);
    }
  };

  var checkIfUspIsReady = function() {
    uspTries++;
    if (window.__uspapi === uspStubFunction && uspTries < uspTriesLimit) {
      console.warn('USP is not accessible');
    } else {
      clearInterval(uspInterval);
    }
  };

  if (typeof window.__uspapi === 'undefined') {
    window.__uspapi = uspStubFunction;
    var uspInterval = setInterval(checkIfUspIsReady, 6000);
  }
})();

//API call and event listener callback 
window.__tcfapi('addEventListener', 2, function (tcData, success) {
    var server = window.location.hostname;
    var google = false;
    var facebook = false;
    var quantcast = false;
    var twitter = false;
    var twitterJapan = false;
    var adCloud = false;
    var linkedIn = false;
    var yahoo = false;
    var across = false;
    var baidu = false;
    var weChat = false;
    var researchGate = false;
    var terminus = false;
    var fancyDigital = false;
    var quora = false;
    var appcast = false;
    var consentResult = false;
    var liResult = false;

    //set services by domain
    if (server.indexOf('ww2-') == -1 && server.indexOf('ww2.') == -1 && server.indexOf('matlab.') == -1 && server.indexOf('home-dev') == -1 ) {
        google = true;
        facebook = true;
        adCloud = true;
        terminus = true;
    }
    if (server.indexOf('ww2-') == -1 && server.indexOf('ww2.') == -1 && server.indexOf('in-') == -1 && server.indexOf('in.') == -1) {
        quantcast = true;
    }

    if (server.indexOf('ww2-') == -1 && server.indexOf('ww2.') == -1 && server.indexOf('kr-') == -1 && server.indexOf('kr.') && server.indexOf('jp-') == -1 && server.indexOf('jp.') == -1) {
        twitter = true;
        linkedIn = true;
    }

    if (server.indexOf('matlabacademy-') > -1 || server.indexOf('matlabacademy.') > -1) {
        quora = true;
    }
    if (server.indexOf('www-test') > -1 || server.indexOf('www-stage') > -1 || server.indexOf('www-integ') > -1 || server.indexOf('www.') > -1) {
        quora = true;
        appcast = true;
    }
    if (server.indexOf('jp-test') > -1 || server.indexOf('jp-stage') > -1 || server.indexOf('jp-integ') > -1 || server.indexOf('jp.') > -1) {
        yahoo = true;
        twitterJapan = true;
    }
    if (server.indexOf('ww2-test') > -1 || server.indexOf('ww2-stage') > -1 || server.indexOf('ww2-integ') > -1 || server.indexOf('ww2.') > -1) {
        baidu = true;
        weChat = true;
        fancyDigital = true;
    }
    if (server.indexOf('kr-test') > -1 || server.indexOf('kr-stage') > -1 || server.indexOf('kr-integ') > -1 || server.indexOf('kr.') > -1) {
        across = true;
    }
    if (server.indexOf('matlab.') > -1 || server.indexOf('home-dev') > -1 ) {
        google = false;
        facebook = false;
        adCloud = false;
        terminus = false;
        quantcast = false;
        twitter = false;
        linkedIn = false;
    }

    //determine if CMP loaded,what consent status is,call scripts 
    if (success) {
        if (tcData.gdprApplies) {
            if (tcData.eventStatus === 'tcloaded' || tcData.eventStatus === 'useractioncomplete') {
				// Common logic for both 'tcloaded' and 'useractioncomplete'
                if ('1' in tcData.purpose.consents && tcData.purpose.consents[10] === true) {
                    for (var i = 1; i < 6; i++) {
                        if (tcData.purpose.consents[i] === false) {
                            consentResult = false;
                            break;
                        } else {
                            consentResult = true;
                        }
                    }
                }

                if ('1' in tcData.purpose.legitimateInterests && tcData.purpose.legitimateInterests[2] /*&& tcData.purpose.legitimateInterests[5] */&& tcData.purpose.legitimateInterests[10]) {
                    liResult = 'true';
                }
                //fire scripts here
                if ((consentResult) && (liResult)) {_satellite.cookie.set('cmpConsent', 'true', { domain: _satellite.getVar('treasureDataSscDomain') })}
                if ((consentResult) && (liResult) && (google)) { _satellite.track('googleBase'); }
                if ((consentResult) && (liResult) && (facebook)) { _satellite.track('facebookBase'); }
                if ((consentResult) && (liResult) && (quantcast)) { _satellite.track('quantcastBase'); }
                if ((consentResult) && (liResult) && (adCloud)) { _satellite.track('adCloudBase'); }
                if ((consentResult) && (liResult) && (twitter)) { _satellite.track('twitterBase'); }
                if ((consentResult) && (liResult) && (researchGate)) { _satellite.track('researchGateBase'); }
                if ((consentResult) && (liResult) && (terminus)) { _satellite.track('terminusBase'); }
                if ((consentResult) && (liResult) && (linkedIn)) { _satellite.track('linkedInBase'); }
                if ((consentResult) && (liResult) && (twitterJapan)) { _satellite.track('twitterBaseJapan'); }
                if ((consentResult) && (liResult) && (yahoo)) { _satellite.track('yahooBase'); }
                if ((consentResult) && (liResult) && (across)) { _satellite.track('acrossBase'); }
                if ((consentResult) && (liResult) && (baidu)) { _satellite.track('baiduBase'); }
                if ((consentResult) && (liResult) && (weChat)) { _satellite.track('weChatBase'); }
                if ((consentResult) && (liResult) && (fancyDigital)) { _satellite.track('fancyDigitalBase'); }
                if ((consentResult) && (liResult) && (quora)) { _satellite.track('quoraBase'); }
                if ((consentResult) && (liResult) && (appcast)) { _satellite.track('appcastBase'); }

            } else {
                // print a debug error message to the console
            }
        } else { /* gdpr does not apply */
            // Most likely you want to make the ad request in this case 
            _satellite.cookie.set('cmpConsent', 'true', { domain: _satellite.getVar('treasureDataSscDomain') });
            if (google) { _satellite.track('googleBase'); }
            if (facebook) { _satellite.track('facebookBase'); }
            if (quantcast) { _satellite.track('quantcastBase'); }
            if (adCloud) { _satellite.track('adCloudBase'); }
            if (twitter) { _satellite.track('twitterBase'); }
            if (researchGate) { _satellite.track('researchGateBase'); }
            if (terminus) { _satellite.track('terminusBase'); }
            if (twitterJapan) { _satellite.track('twitterBaseJapan'); }
            if (linkedIn) { _satellite.track('linkedInBase'); }
            if (yahoo) { _satellite.track('yahooBase'); }
            if (across) { _satellite.track('acrossBase'); }
            if (baidu) { _satellite.track('baiduBase'); }
            if (weChat) { _satellite.track('weChatBase'); }
            if (fancyDigital) { _satellite.track('fancyDigitalBase'); }
            if (quora) { _satellite.track('quoraBase'); }
            if ((appcast)) { _satellite.track('appcastBase'); }
        }
    }
})
</script><iframe name="__tcfapiLocator" style="display: none;" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/saved_resource(1).html"></iframe><script>
var _elqQ = _elqQ || [];
_elqQ.push(["elqSetSiteId", "646005169"]), _elqQ.push(["elqUseFirstPartyCookie", "tracking.mathworks.com"]), _elqQ.push(["elqTrackPageView", window.location.href]),
  function() {
    function e() {
      var e = document.createElement("script");
      e.type = "text/javascript", e.async = !0, e.src = "//img03.en25.com/i/elqCfg.min.js";
      var t = document.getElementsByTagName("script")[0];
      t.parentNode.insertBefore(e, t)
    }
    e()
  }();
</script><script>_satellite["_runScript1"](function(event, target, Promise) {
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0020/4750.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
});</script><script type="text/javascript" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/main.min.js.download"></script><a class="btn btn_color_mediumgray" id="go-top" style="display: none;"><span class="icon-arrow-open-up icon_24"></span></a><script>
//TD JS SDK
!function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=["addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],s=0;s<r.length;s++){var c=r[s];e[t].prototype[c]=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}}(c)}var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/3.1.3/td.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}}("Treasure",this);

// Configure an instance for your database
var td = new Treasure({
  writeKey: '11849/ea916395a5d7f890f5616f32b583a64d93ee220e',
  database: _satellite.getVar('treasureDataTable'),
  useNewJavaScriptEndpoint: true,
  host: 'us01.records.in.treasuredata.com',
  sscDomain: _satellite.getVar('treasureDataSscDomain'),
  sscServer: _satellite.getVar('treasureDataSscServer'),
  useServerSideCookie: true
});

//set consent status
let cmpConsent = _satellite.cookie.get('cmpConsent');
let mwaConsent = _satellite.getVar('mwaAuthStatus')
if (cmpConsent) {
  td.setSignedMode();
} else if (mwaConsent == 'logged in') {
  td.setSignedMode();
} else {
  td.setAnonymousMode();
}
//set variables for TD
let visitor_id = _satellite.getVar('visitorId');
let eloqua_guid_id = _satellite.getVar('Eloqua2');
let pagename = _satellite.getVar('pageName');
// Enable cross-domain tracking
td.set('$global', 'td_global_id', 'td_global_id')
//set td attributes
td.set('td_clickdata_raw', {
  td_adobe_mcvisid: visitor_id,
  td_eloq_guid_id: eloqua_guid_id,
  td_adobe_pagename: pagename
});
//fetchcookie, track page view
td.fetchServerCookie(successCallback, errorCallback);
//track pv functions
function fireEvents() {
  td.trackPageview('td_clickdata_raw');
}
function errorCallback() {
  fireEvents();
}
function successCallback(result) {
  // result === Server Side Cookie
  td.set('$global', {
    td_ssc_id: result
  });
  fireEvents();
}
//retrive the gloablId
var successCallbackGlobalId = function(globalId) {
  _satellite.setVar('treasureDataGlobalId', globalId);
};
var errorCallbackGlobalId = function(error) {
  //cry();
}
if (cmpConsent) {
  td.fetchGlobalID(successCallbackGlobalId, errorCallbackGlobalId);
}

var SuccessCallback = function(res) {
  var tdSegments = '';
  var tdAttributes = '';
  tdSegments = Object.values(res[0].values);
  localStorage.setItem('tdSegments', tdSegments);
  for (let [key, value] of Object.entries(res[0].attributes)) {
    tdAttributes += (`${key}:${value}` + ',')
  }
  localStorage.setItem('tdAttributes', tdAttributes);
}

if (cmpConsent) {
  td.fetchUserSegments({
    // prod
      'audienceToken': ['180637e3-e67f-4975-9b95-2313d30ceb95'],
    keys: {
        'adobe_visitor_ids': visitor_id
    }
  }, SuccessCallback);
}

</script><script>_satellite["_runScript2"](function(event, target, Promise) {
_satellite.cookie.set("_sdsat_eid",_satellite.getVar('eid'),1);
});</script><script>_satellite["_runScript3"](function(event, target, Promise) {
var _kiq=_kiq||[];_kiq.push(["enableAccessibilityMode"]),setTimeout((function(){var e=document,t=e.getElementsByTagName("script")[0],s=e.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cl.qualaroo.com/ki.js/49559/ahy.js",t.parentNode.insertBefore(s,t)}),1);
});</script><div class="Kudos"><template shadowrootmode="open"></template><style>.Kudos{z-index:2147483647;position:fixed;box-sizing:border-box;margin:0px;padding:0px;right:0px;bottom:0px;font-size:16px;font-family:"DM Sans",sans-serif;line-height:1;-webkit-font-smoothing:antialiased}.Kudos-Mobile{font-size:16px;font-family:"DM Sans",sans-serif;line-height:1;-webkit-font-smoothing:antialiased}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2NvbnRlbnQvY29udGFpbmVyL0t1ZG9zLmxhenkuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUNJLGtCQUFBLENBQ0EsY0FBQSxDQUNBLHFCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLGNBQUEsQ0FDQSxnQ0FBQSxDQUNBLGFBQUEsQ0FDQSxrQ0FBQSxDQUdKLGNBQ0ksY0FBQSxDQUNBLGdDQUFBLENBQ0EsYUFBQSxDQUNBLGtDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZmFtaWx5PURNK1NhbnM6d2dodEA0MDA7NTAwOzYwMDs3MDA7ODAwOzkwMCZkaXNwbGF5PXN3YXAnKTtcblxuLkt1ZG9zIHtcbiAgICB6LWluZGV4OiAyMTQ3NDgzNjQ3O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIG1hcmdpbjogMHB4O1xuICAgIHBhZGRpbmc6IDBweDtcbiAgICByaWdodDogMHB4O1xuICAgIGJvdHRvbTogMHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBmb250LWZhbWlseTogJ0RNIFNhbnMnLCBzYW5zLXNlcmlmO1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xufVxuXG4uS3Vkb3MtTW9iaWxlIHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgZm9udC1mYW1pbHk6ICdETSBTYW5zJywgc2Fucy1zZXJpZjtcbiAgICBsaW5lLWhlaWdodDogMTtcbiAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcbn1cblxuQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEA0MDA7NTAwOzYwMDs3MDAmZmFtaWx5PURNK1NhbnM6d2dodEA0MDA7NTAwOzYwMDs3MDA7ODAwOzkwMCZkaXNwbGF5PXN3YXAnKTtcbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700;800;900&display=swap);</style><style>@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700;800;900&display=swap);</style></div><script>_satellite["_runScript4"](function(event, target, Promise) {
var _kiq=_kiq||[];_kiq.push(["enableAccessibilityMode"]),setTimeout((function(){var e=document,t=e.getElementsByTagName("script")[0],s=e.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cl.qualaroo.com/ki.js/49559/ahy.js",t.parentNode.insertBefore(s,t)}),1);
});</script><script>_satellite["_runScript5"](function(event, target, Promise) {
!function(e,t,n,o,a,c,f){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(c=t.createElement(n)).async=!0,c.src=o,(f=t.getElementsByTagName(n)[0]).parentNode.insertBefore(c,f))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("set","autoConfig",!1,"186030155234771"),fbq("init","186030155234771"),fbq("track","PageView");
});</script><iframe sandbox="" style="display: none;" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/saved_resource(2).html"></iframe><script>_satellite["_runScript6"](function(event, target, Promise) {
var _qevents=_qevents||[];!function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",e.async=!0,e.type="text/javascript";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),_qevents.push({qacct:"p-zfNtLVVEHXE-1",labels:" ",orderid:" ",revenue:" ",event:"refresh"});
});</script><script>_satellite["_runScript7"](function(event, target, Promise) {
var my_awesome_script=document.createElement("script");my_awesome_script.setAttribute("src","https://www.everestjs.net/static/le/last-event-tag-latest.min.js"),document.head.appendChild(my_awesome_script);var adCloudCheck=0,adCloudInterval=setInterval((function(){"undefined"!=typeof AdCloudEvent&&(AdCloudEvent("B1441C8B533095C00A490D4D@AdobeOrg","mathwgbl"),window.clearInterval(adCloudInterval)),5==++adCloudCheck&&window.clearInterval(adCloudInterval)}),200);
});</script><script>_satellite["_runScript8"](function(event, target, Promise) {
!function(e,t,n,c,p,a){e.qp||(c=e.qp=function(){c.qp?c.qp.apply(c,arguments):c.queue.push(arguments)},c.queue=[],(p=document.createElement(t)).async=!0,p.src=n,(a=document.getElementsByTagName(t)[0]).parentNode.insertBefore(p,a))}(window,"script","https://a.quora.com/qevents.js"),qp("init","804e7bec804c4c28b176de5e0395a246"),qp("track","ViewContent");
});</script><iframe id="qualaroo_dnt_frame" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/frame.html" style="width: 1px; height: 1px; display: none; opacity: 0;"></iframe><iframe id="qualaroo_dnt_frame" src="./Monocular Visual Simultaneous Localization and Mapping - MATLAB &amp; Simulink_files/frame(1).html" style="width: 1px; height: 1px; display: none; opacity: 0;"></iframe></body></html>